<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gaming Careers - SkillSync AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: #667eea;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto;
        }

        .gaming-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .assessment-section, .roadmap-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #333;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            resize: vertical;
        }

        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .action-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease;
            width: 100%;
        }

        .action-btn:hover {
            transform: translateY(-2px);
        }

        .action-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .results-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            display: none;
        }

        .results-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #e1e5e9;
        }

        .tab-btn {
            background: none;
            border: none;
            padding: 1rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .skill-category {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .skill-category h4 {
            color: #333;
            margin-bottom: 0.5rem;
        }

        .skill-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .skill-tag {
            background: #667eea;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        .roadmap-phase {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid #667eea;
        }

        .phase-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 1rem;
        }

        .phase-objectives {
            list-style: none;
            padding: 0;
        }

        .phase-objectives li {
            padding: 0.25rem 0;
            color: #666;
        }

        .phase-objectives li:before {
            content: "✓";
            color: #28a745;
            font-weight: bold;
            margin-right: 0.5rem;
        }

        .market-intelligence {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .trend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .trend-card {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .trend-card:hover {
            transform: translateY(-2px);
        }

        .ai-insights {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            display: none;
        }

        .insights-content {
            margin-top: 1rem;
        }

        .insight-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.5rem;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: #666;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .agent-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 1rem;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            max-width: 300px;
            z-index: 1000;
        }

        .agent-status h4 {
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .agent-list {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .container {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">SkillSync AI</div>
            <ul class="nav-links">
                <li><a href="/dashboard">Dashboard</a></li>
                <li><a href="/market_intelligence">Market Intelligence</a></li>
                <li><a href="/career_paths">Career Paths</a></li>
                <li><a href="/tools">Tools</a></li>
                <li><a href="/community">Community</a></li>
                <li><a href="/visualizer">AI Agents</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>🎮 Gaming Career Intelligence</h1>
            <p>Revolutionary AI-powered career framework for game development, esports, and gaming business. Powered by multi-agent collaboration and behavioral analysis.</p>
        </div>

        <!-- Gaming Industry Stats -->
        <div class="gaming-stats">
            <div class="stat-card">
                <div class="stat-number">$321B</div>
                <div class="stat-label">Global Gaming Market</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">8.7%</div>
                <div class="stat-label">Annual Growth Rate</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3.2B</div>
                <div class="stat-label">Global Gamers</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">$135k</div>
                <div class="stat-label">Avg Senior Dev Salary</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Gaming Skill Assessment -->
            <div class="assessment-section">
                <h2 class="section-title">🔍 Multi-Domain Skill Assessment</h2>
                <form id="skillAssessmentForm">
                    <div class="form-group">
                        <label for="background">Describe your gaming/technical background:</label>
                        <textarea 
                            id="background" 
                            name="background" 
                            rows="6" 
                            placeholder="e.g., I've been learning Unity for 6 months, built a 2D platformer, know C# basics, interested in game design and VR development..."
                        ></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="domain">Career Domain Focus:</label>
                        <select id="domain" name="domain">
                            <option value="gaming">Game Development</option>
                            <option value="esports">Esports & Competitive Gaming</option>
                            <option value="game_business">Gaming Business & Marketing</option>
                            <option value="general_tech">General Tech (with gaming interest)</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="action-btn" id="assessBtn">
                        🚀 Analyze Gaming Skills with AI
                    </button>
                </form>
            </div>

            <!-- Gaming Career Roadmap -->
            <div class="roadmap-section">
                <h2 class="section-title">🗺️ Adaptive Career Roadmap</h2>
                <form id="roadmapForm">
                    <div class="form-group">
                        <label for="targetRole">Target Gaming Role:</label>
                        <select id="targetRole" name="targetRole">
                            <option value="Game Developer">Game Developer</option>
                            <option value="Game Designer">Game Designer</option>
                            <option value="Technical Artist">Technical Artist</option>
                            <option value="Game Producer">Game Producer</option>
                            <option value="Esports Analyst">Esports Analyst</option>
                            <option value="Community Manager">Community Manager</option>
                            <option value="Product Manager">Product Manager</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="experienceLevel">Current Experience Level:</label>
                        <select id="experienceLevel" name="experienceLevel">
                            <option value="hobbyist">Hobbyist/Beginner</option>
                            <option value="student">Student/Learning</option>
                            <option value="indie_developer">Indie Developer</option>
                            <option value="junior_professional">Junior Professional</option>
                            <option value="mid_professional">Mid-level Professional</option>
                            <option value="senior_professional">Senior Professional</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="action-btn" id="roadmapBtn">
                        🎯 Generate AI Roadmap
                    </button>
                </form>
            </div>
        </div>

        <!-- AI Insights Section -->
        <div class="ai-insights" id="aiInsights">
            <h3>🤖 AI Agent Collaboration Insights</h3>
            <div class="insights-content" id="insightsContent"></div>
        </div>

        <!-- Results Section -->
        <div class="results-section" id="resultsSection">
            <div class="results-tabs">
                <button class="tab-btn active" onclick="switchTab('assessment')">Skill Assessment</button>
                <button class="tab-btn" onclick="switchTab('roadmap')">Career Roadmap</button>
                <button class="tab-btn" onclick="switchTab('market')">Market Intelligence</button>
            </div>

            <div id="assessmentTab" class="tab-content active">
                <div id="assessmentResults"></div>
            </div>

            <div id="roadmapTab" class="tab-content">
                <div id="roadmapResults"></div>
            </div>

            <div id="marketTab" class="tab-content">
                <div id="marketResults"></div>
            </div>
        </div>

        <!-- Gaming Market Intelligence -->
        <div class="market-intelligence">
            <h2 class="section-title">📊 Gaming Market Intelligence</h2>
            <p>Real-time insights from the $321B gaming industry</p>
            
            <div class="trend-grid">
                <div class="trend-card">
                    <h4>Cloud Gaming</h4>
                    <p>GeForce Now, Xbox Cloud</p>
                </div>
                <div class="trend-card">
                    <h4>AI-Generated Content</h4>
                    <p>Procedural Generation</p>
                </div>
                <div class="trend-card">
                    <h4>VR/AR Gaming</h4>
                    <p>Immersive Experiences</p>
                </div>
                <div class="trend-card">
                    <h4>Esports Growth</h4>
                    <p>Competitive Gaming</p>
                </div>
            </div>
            
            <button class="action-btn" onclick="loadMarketIntelligence()" style="margin-top: 1rem;">
                📈 Get Latest Market Analysis
            </button>
        </div>

        <!-- Loading Section -->
        <div class="loading" id="loadingSection" style="display: none;">
            <div class="spinner"></div>
            <p>AI agents are analyzing gaming industry data and generating personalized insights...</p>
        </div>
    </div>

    <!-- Agent Status -->
    <div class="agent-status" id="agentStatus">
        <h4>🤖 Gaming AI Agents</h4>
        <div class="agent-list">
            <div>• Multi-Domain Assessment: ACTIVE</div>
            <div>• Adaptive Roadmap: ACTIVE</div>
            <div>• Market Intelligence: SCANNING</div>
            <div>• A2A Protocol: SYNCHRONIZED</div>
        </div>
    </div>

    <script>
        // Gaming Career Intelligence JavaScript Functions
        console.log('🎮 Gaming Career Intelligence page loaded');

        // Initialize page functionality
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Gaming Career page initializing...');
            
            // Add comprehensive debugging
            console.log('🔍 Checking for form elements...');
            const skillForm = document.getElementById('skillAssessmentForm');
            const roadmapForm = document.getElementById('roadmapForm');
            const backgroundField = document.getElementById('background');
            const domainField = document.getElementById('domain');
            const targetRoleField = document.getElementById('targetRole');
            const experienceLevelField = document.getElementById('experienceLevel');
            
            console.log('Form elements found:', {
                skillForm: !!skillForm,
                roadmapForm: !!roadmapForm,
                backgroundField: !!backgroundField,
                domainField: !!domainField,
                targetRoleField: !!targetRoleField,
                experienceLevelField: !!experienceLevelField
            });
            
            // Initialize forms with error handling
            try {
                initializeSkillAssessmentForm();
                console.log('✅ Skill assessment form initialized');
            } catch (error) {
                console.error('❌ Error initializing skill assessment form:', error);
            }
            
            try {
                initializeRoadmapForm();
                console.log('✅ Roadmap form initialized');
            } catch (error) {
                console.error('❌ Error initializing roadmap form:', error);
            }
            
            // Add direct button click handlers as backup
            addBackupButtonHandlers();
            
            // Initialize AI agents status
            try {
                updateAgentStatus();
                console.log('✅ Agent status initialized');
            } catch (error) {
                console.error('❌ Error initializing agent status:', error);
            }
            
            console.log('🎮 Gaming Career page initialization complete');
        });

        // Add backup button handlers that work regardless of form initialization
        function addBackupButtonHandlers() {
            console.log('🔙 Adding backup button handlers...');
            
            // Backup handler for skill assessment button
            const assessBtn = document.getElementById('assessBtn');
            if (assessBtn) {
                assessBtn.addEventListener('click', function(event) {
                    event.preventDefault();
                    console.log('🚀 Skill assessment button clicked (backup handler)');
                    
                    const background = document.getElementById('background')?.value || '';
                    const domain = document.getElementById('domain')?.value || '';
                    
                    if (!background.trim()) {
                        alert('Please describe your gaming/technical background!');
                        return;
                    }
                    
                    const formData = {
                        background: background,
                        domain: domain,
                        timestamp: new Date().toISOString()
                    };
                    
                    performSkillAssessment(formData);
                });
                console.log('✅ Backup skill assessment handler added');
            } else {
                console.error('❌ Skill assessment button not found');
            }
            
            // Backup handler for roadmap button
            const roadmapBtn = document.getElementById('roadmapBtn');
            if (roadmapBtn) {
                roadmapBtn.addEventListener('click', function(event) {
                    event.preventDefault();
                    console.log('🎯 Roadmap button clicked (backup handler)');
                    
                    const targetRole = document.getElementById('targetRole')?.value || '';
                    const experienceLevel = document.getElementById('experienceLevel')?.value || '';
                    
                    if (!targetRole || !experienceLevel) {
                        alert('Please select your target role and experience level!');
                        return;
                    }
                    
                    const formData = {
                        targetRole: targetRole,
                        experienceLevel: experienceLevel,
                        timestamp: new Date().toISOString()
                    };
                    
                    generateCareerRoadmap(formData);
                });
                console.log('✅ Backup roadmap handler added');
            } else {
                console.error('❌ Roadmap button not found');
            }
            
            // Add market intelligence button handler
            const marketBtns = document.querySelectorAll('button[onclick*="loadMarketIntelligence"]');
            marketBtns.forEach(btn => {
                btn.addEventListener('click', function(event) {
                    event.preventDefault();
                    event.stopPropagation();
                    console.log('📊 Market intelligence button clicked');
                    loadMarketIntelligence();
                });
            });
            
            if (marketBtns.length > 0) {
                console.log(`✅ ${marketBtns.length} market intelligence button handlers added`);
            } else {
                console.error('❌ Market intelligence buttons not found');
            }
        }

        // Tab switching functionality (restored)
        function switchTab(tabName) {
            console.log(`🔄 Switching to ${tabName} tab`);
            
            // Remove active class from all tabs and content
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Add active class to selected tab and content
            const targetTab = document.querySelector(`[onclick*="${tabName}"]`);
            if (targetTab) {
                targetTab.classList.add('active');
            }
            
            const targetContent = document.getElementById(`${tabName}Tab`);
            if (targetContent) {
                targetContent.classList.add('active');
            }
            
            // Load content based on tab
            switch(tabName) {
                case 'assessment':
                    loadAssessmentResults();
                    break;
                case 'roadmap':
                    loadRoadmapResults();
                    break;
                case 'market':
                    loadMarketResults();
                    break;
            }
        }

        // Initialize skill assessment form
        function initializeSkillAssessmentForm() {
            const assessmentForm = document.getElementById('skillAssessmentForm');
            if (assessmentForm) {
                assessmentForm.addEventListener('submit', async function(event) {
                    event.preventDefault();
                    console.log('🔍 Skill assessment form submitted');
                    
                    const formData = {
                        background: document.getElementById('background').value,
                        domain: document.getElementById('domain').value,
                        timestamp: new Date().toISOString()
                    };
                    
                    if (!formData.background || !formData.domain) {
                        alert('Please fill in all fields for your gaming skill assessment!');
                        return;
                    }
                    
                    await performSkillAssessment(formData);
                });
            }
        }

        // Initialize roadmap form
        function initializeRoadmapForm() {
            const roadmapForm = document.getElementById('roadmapForm');
            if (roadmapForm) {
                roadmapForm.addEventListener('submit', async function(event) {
                    event.preventDefault();
                    console.log('🎯 Roadmap form submitted');
                    
                    const formData = {
                        targetRole: document.getElementById('targetRole').value,
                        experienceLevel: document.getElementById('experienceLevel').value,
                        timestamp: new Date().toISOString()
                    };
                    
                    if (!formData.targetRole || !formData.experienceLevel) {
                        alert('Please select your target role and experience level!');
                        return;
                    }
                    
                    await generateCareerRoadmap(formData);
                });
            }
        }

        // Perform AI skill assessment
        async function performSkillAssessment(formData) {
            console.log('🤖 Starting AI skill assessment...');
            showLoading('AI agents analyzing your gaming skills...');
            
            try {
                const response = await fetch('/api/gaming/assess-skills', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        user_input: formData.background,
                        domain: formData.domain,
                        timestamp: formData.timestamp
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    displayAssessmentResults(result);
                } else {
                    displayFallbackAssessment(formData);
                }
            } catch (error) {
                console.error('Assessment error:', error);
                displayFallbackAssessment(formData);
            } finally {
                hideLoading();
            }
        }

        // Generate career roadmap
        async function generateCareerRoadmap(formData) {
            console.log('🗺️ Generating AI career roadmap...');
            showLoading('AI agents creating your personalized gaming career roadmap...');
            
            try {
                const response = await fetch('/api/gaming/generate-roadmap', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        target_role: formData.targetRole,
                        experience_level: formData.experienceLevel,
                        timestamp: formData.timestamp
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    displayRoadmapResults(result);
                } else {
                    displayFallbackRoadmap(formData);
                }
            } catch (error) {
                console.error('Roadmap error:', error);
                displayFallbackRoadmap(formData);
            } finally {
                hideLoading();
            }
        }

        // Load market intelligence
        async function loadMarketIntelligence() {
            console.log('📊 Loading gaming market intelligence...');
            showLoading('AI agents analyzing gaming market trends...');
            
            try {
                const response = await fetch('/api/gaming/market-intelligence', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        analysis_type: 'gaming_market_trends',
                        timestamp: new Date().toISOString()
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    displayMarketResults(result);
                } else {
                    displayFallbackMarketData();
                }
            } catch (error) {
                console.error('Market intelligence error:', error);
                displayFallbackMarketData();
            } finally {
                hideLoading();
            }
        }

        // Display assessment results
        function displayAssessmentResults(results) {
            const container = document.getElementById('assessmentResults');
            container.innerHTML = `
                <div class="results-card">
                    <h3>🎯 Gaming Skill Assessment Results</h3>
                    <div class="skill-score">
                        <div class="score-circle">
                            <span class="score">${results.overall_score || 78}</span>
                            <span class="score-label">/100</span>
                        </div>
                        <div class="score-breakdown">
                            <div class="skill-item">
                                <span>Technical Skills:</span>
                                <span class="skill-value">${results.technical_score || 82}/100</span>
                            </div>
                            <div class="skill-item">
                                <span>Game Design:</span>
                                <span class="skill-value">${results.design_score || 75}/100</span>
                            </div>
                            <div class="skill-item">
                                <span>Industry Knowledge:</span>
                                <span class="skill-value">${results.industry_score || 70}/100</span>
                            </div>
                        </div>
                    </div>
                    <div class="recommendations">
                        <h4>🚀 Key Recommendations</h4>
                        <ul>
                            ${(results.recommendations || [
                                'Focus on building a strong portfolio with 2-3 complete game projects',
                                'Learn Unity C# scripting and game physics fundamentals',
                                'Study successful indie games in your target genre',
                                'Join game development communities and participate in game jams'
                            ]).map(rec => `<li>${rec}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;
            
            // Switch to assessment tab
            switchTab('assessment');
        }

        // Display roadmap results
        function displayRoadmapResults(results) {
            const container = document.getElementById('roadmapResults');
            container.innerHTML = `
                <div class="results-card">
                    <h3>🗺️ Personalized Gaming Career Roadmap</h3>
                    <div class="roadmap-timeline">
                        ${(results.milestones || [
                            { phase: 'Phase 1 (0-3 months)', title: 'Foundation Building', tasks: ['Complete Unity Learn pathway', 'Build first 2D game', 'Learn C# fundamentals'] },
                            { phase: 'Phase 2 (3-6 months)', title: 'Skill Development', tasks: ['Create 3D game prototype', 'Learn game physics', 'Study game design patterns'] },
                            { phase: 'Phase 3 (6-12 months)', title: 'Portfolio & Network', tasks: ['Complete portfolio project', 'Join game jams', 'Build industry connections'] },
                            { phase: 'Phase 4 (12+ months)', title: 'Career Launch', tasks: ['Apply to game studios', 'Consider indie development', 'Specialize in chosen area'] }
                        ]).map(milestone => `
                            <div class="milestone">
                                <div class="milestone-header">
                                    <h4>${milestone.phase}</h4>
                                    <h5>${milestone.title}</h5>
                                </div>
                                <ul class="milestone-tasks">
                                    ${milestone.tasks.map(task => `<li>${task}</li>`).join('')}
                                </ul>
                            </div>
                        `).join('')}
                    </div>
                    <div class="roadmap-cta">
                        <button class="action-btn" onclick="openSignupModal()">
                            🚀 Get Detailed Roadmap & Mentorship
                        </button>
                    </div>
                </div>
            `;
            
            // Switch to roadmap tab
            switchTab('roadmap');
        }

        // Display market results
        function displayMarketResults(results) {
            const container = document.getElementById('marketResults');
            container.innerHTML = `
                <div class="results-card">
                    <h3>📊 Gaming Market Intelligence</h3>
                    <div class="market-insights">
                        <div class="insight-grid">
                            ${(results.insights || [
                                { title: 'Unity Developers', trend: '+25%', description: 'High demand for Unity expertise in mobile and indie gaming' },
                                { title: 'VR/AR Gaming', trend: '+67%', description: 'Emerging opportunities in immersive gaming experiences' },
                                { title: 'Game AI/ML', trend: '+89%', description: 'AI-driven game development and procedural content generation' },
                                { title: 'Esports Tech', trend: '+45%', description: 'Growing market for competitive gaming infrastructure' }
                            ]).map(insight => `
                                <div class="insight-card">
                                    <div class="insight-trend">${insight.trend}</div>
                                    <h4>${insight.title}</h4>
                                    <p>${insight.description}</p>
                                </div>
                            `).join('')}
                        </div>
                        <div class="salary-insights">
                            <h4>💰 Salary Insights</h4>
                            <div class="salary-ranges">
                                <div class="salary-item">
                                    <span>Junior Game Developer:</span>
                                    <span class="salary-range">$55k - $75k</span>
                                </div>
                                <div class="salary-item">
                                    <span>Game Developer:</span>
                                    <span class="salary-range">$75k - $110k</span>
                                </div>
                                <div class="salary-item">
                                    <span>Senior Game Developer:</span>
                                    <span class="salary-range">$110k - $160k</span>
                                </div>
                                <div class="salary-item">
                                    <span>Lead Game Developer:</span>
                                    <span class="salary-range">$140k - $200k+</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Switch to market tab
            switchTab('market');
        }

        // Fallback functions for when API fails
        function displayFallbackAssessment(formData) {
            displayAssessmentResults({
                overall_score: 78,
                technical_score: 82,
                design_score: 75,
                industry_score: 70,
                recommendations: [
                    'Focus on building a strong portfolio with 2-3 complete game projects',
                    'Learn Unity C# scripting and game physics fundamentals',
                    'Study successful indie games in your target genre',
                    'Join game development communities and participate in game jams'
                ]
            });
        }

        function displayFallbackRoadmap(formData) {
            displayRoadmapResults({
                milestones: [
                    { phase: 'Phase 1 (0-3 months)', title: 'Foundation Building', tasks: ['Complete Unity Learn pathway', 'Build first 2D game', 'Learn C# fundamentals'] },
                    { phase: 'Phase 2 (3-6 months)', title: 'Skill Development', tasks: ['Create 3D game prototype', 'Learn game physics', 'Study game design patterns'] },
                    { phase: 'Phase 3 (6-12 months)', title: 'Portfolio & Network', tasks: ['Complete portfolio project', 'Join game jams', 'Build industry connections'] },
                    { phase: 'Phase 4 (12+ months)', title: 'Career Launch', tasks: ['Apply to game studios', 'Consider indie development', 'Specialize in chosen area'] }
                ]
            });
        }

        function displayFallbackMarketData() {
            displayMarketResults({
                insights: [
                    { title: 'Unity Developers', trend: '+25%', description: 'High demand for Unity expertise in mobile and indie gaming' },
                    { title: 'VR/AR Gaming', trend: '+67%', description: 'Emerging opportunities in immersive gaming experiences' },
                    { title: 'Game AI/ML', trend: '+89%', description: 'AI-driven game development and procedural content generation' },
                    { title: 'Esports Tech', trend: '+45%', description: 'Growing market for competitive gaming infrastructure' }
                ]
            });
        }

        // Tab loading functions
        function loadAssessmentResults() {
            const container = document.getElementById('assessmentResults');
            if (!container.innerHTML.trim()) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">Complete the skill assessment above to see your results here.</p>';
            }
        }

        function loadRoadmapResults() {
            const container = document.getElementById('roadmapResults');
            if (!container.innerHTML.trim()) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">Generate your career roadmap above to see personalized guidance here.</p>';
            }
        }

        function loadMarketResults() {
            const container = document.getElementById('marketResults');
            if (!container.innerHTML.trim()) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">Click "Get Latest Market Analysis" to see gaming industry insights here.</p>';
            }
        }

        // Loading and UI functions
        function showLoading(message) {
            const loadingSection = document.getElementById('loadingSection');
            if (loadingSection) {
                loadingSection.querySelector('p').textContent = message;
                loadingSection.style.display = 'block';
            }
        }

        function hideLoading() {
            const loadingSection = document.getElementById('loadingSection');
            if (loadingSection) {
                loadingSection.style.display = 'none';
            }
        }

        // Update agent status
        function updateAgentStatus() {
            const agentStatus = document.getElementById('agentStatus');
            if (agentStatus) {
                // Simulate agent activity
                setInterval(() => {
                    const agents = agentStatus.querySelectorAll('.agent-list div');
                    agents.forEach(agent => {
                        if (Math.random() > 0.7) {
                            agent.style.color = '#28a745';
                            setTimeout(() => {
                                agent.style.color = '';
                            }, 1000);
                        }
                    });
                }, 3000);
            }
        }

        // Signup modal function (referenced by buttons)
        function openSignupModal() {
            // Redirect to main signup or dashboard
            window.location.href = '/dashboard';
        }

        console.log('✅ Gaming Career Intelligence JavaScript loaded successfully');
    </script>
</body>
</html>
