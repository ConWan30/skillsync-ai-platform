<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - SkillSync AI Platform</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #667eea;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page-header {
            text-align: center;
            margin-bottom: 3rem;
            color: white;
        }

        .page-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .page-header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .dashboard-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .card-icon {
            font-size: 2rem;
            margin-right: 1rem;
            color: #667eea;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 5px;
            transition: width 0.3s;
        }

        .skill-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }

        .skill-item:last-child {
            border-bottom: none;
        }

        .skill-name {
            font-weight: 500;
        }

        .skill-level {
            color: #667eea;
            font-weight: bold;
        }

        .insight-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid #667eea;
        }

        .insight-date {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .insight-text {
            color: #333;
            line-height: 1.5;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.5rem;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: transform 0.3s, box-shadow 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .quick-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }

        .personalized-header {
            margin-bottom: 2rem;
        }

        .dynamic-headline {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 1rem;
        }

        .urgency-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 0.5rem 1rem;
            margin-top: 1rem;
        }

        .urgency-indicator i {
            margin-right: 0.5rem;
        }

        .emotional-state-indicator {
            display: flex;
            justify-content: center;
            margin-top: 1rem;
        }

        .state-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 0.5rem 1rem;
        }

        .state-badge i {
            margin-right: 0.5rem;
        }

        .market-intelligence-feed {
            margin-bottom: 2rem;
        }

        .feed-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .live-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 0.5rem 1rem;
        }

        .pulse-dot {
            width: 10px;
            height: 10px;
            background: #667eea;
            border-radius: 50%;
            margin-right: 0.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
            }
        }

        .market-alerts {
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .alert-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }

        .alert-item:last-child {
            border-bottom: none;
        }

        .peer-comparison-widget {
            margin-bottom: 2rem;
        }

        .comparison-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .confidence-score {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 0.5rem 1rem;
        }

        .comparison-content {
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .nav-links {
                display: none;
            }
            
            .page-header h1 {
                font-size: 2rem;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }

        .loading-spinner {
            text-align: center;
            color: #666;
        }

        .loading-spinner i {
            margin-right: 0.5rem;
        }

        /* Gaming Integration Styles */
        .market-alerts {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .alert-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
        }

        .alert-item i {
            color: #ffd700;
        }

        .emotional-state {
            margin-top: 1rem;
        }

        .state-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.15);
            padding: 0.75rem 1rem;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .state-indicator i {
            color: #00ff88;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            display: block;
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 0.25rem;
        }

        .stat-value {
            display: block;
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
        }

        .market-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .trending-skills h4 {
            margin-bottom: 0.5rem;
            color: #333;
        }

        .skill-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .skill-tag {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .goals-section {
            margin-bottom: 1.5rem;
        }

        .goals-section h4 {
            color: #333;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .goals-section h4:before {
            content: "🎯";
        }

        .goals-list {
            list-style: none;
            padding: 0;
        }

        .goals-list li {
            padding: 0.25rem 0;
            color: #666;
            position: relative;
            padding-left: 1.5rem;
        }

        .goals-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e1e5e9;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-text {
            font-size: 0.9rem;
            color: #666;
            text-align: center;
        }

        /* Responsive Design for Gaming Features */
        @media (max-width: 768px) {
            .market-alerts {
                flex-direction: column;
            }
            
            .market-stats {
                grid-template-columns: 1fr;
            }
            
            .progress-stats {
                grid-template-columns: 1fr;
            }
        }
        
        /* NEW: Job Recommendations Styles */
        .job-recommendations-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .job-recommendations-intro {
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 1.5rem;
        }
        
        .job-preview-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .job-preview-card {
            background: #fff;
            padding: 1rem;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .job-source-badge {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 5px;
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
        }
        
        .job-source-badge.flexjobs {
            background: #ff69b4;
        }
        
        .job-source-badge.remote-co {
            background: #34c759;
        }
        
        .job-preview-card h4 {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 0.5rem;
        }
        
        .job-preview-card .company {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }
        
        .job-preview-card .salary {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }
        
        .match-score {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 0.5rem 1rem;
            margin-top: 1rem;
        }
        
        .match-score .score {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
        }
        
        .job-recommendations-cta {
            margin-top: 1.5rem;
            text-align: center;
        }
        
        .job-recommendations-cta .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: transform 0.3s, box-shadow 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .job-recommendations-cta .coming-soon-text {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="logo">
                <i class="fas fa-brain"></i> SkillSync AI
            </a>
            <ul class="nav-links">
                <li><a href="/dashboard">Dashboard</a></li>
                <li><a href="/market_intelligence">Market Intelligence</a></li>
                <li><a href="/career_paths">Career Paths</a></li>
                <li><a href="/gaming-careers">🎮 Gaming Careers</a></li>
                <li><a href="/tools">AI Tools</a></li>
                <li><a href="/community">Community</a></li>
                <li><a href="/visualizer">AI Agents</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- SkillSync Transformation Model - Dynamic Personalized Header -->
        <div class="personalized-header" id="personalizedHeader">
            <div class="dynamic-headline">
                <h1 id="dynamicHeadline">Multi-Domain Career Intelligence Dashboard</h1>
                <p id="dynamicSubheadline">AI-powered insights for Tech & Gaming professionals</p>
            </div>
            
            <!-- Real-time Market Alerts -->
            <div class="market-alerts" id="marketAlerts">
                <div class="alert-item">
                    <i class="fas fa-chart-trending-up"></i>
                    <span>Tech Market: High demand for React developers (+15%)</span>
                </div>
                <div class="alert-item">
                    <i class="fas fa-gamepad"></i>
                    <span>Gaming Market: Unity developers in demand (+25%)</span>
                </div>
            </div>
            
            <!-- Emotional State Detection -->
            <div class="emotional-state" id="emotionalState">
                <div class="state-indicator">
                    <i class="fas fa-brain"></i>
                    <span id="stateText">Analyzing your career momentum...</span>
                </div>
            </div>
        </div>

        <!-- Real-Time Market Intelligence Feed -->
        <div class="market-intelligence-feed" id="marketFeed">
            <div class="feed-header">
                <h3><i class="fas fa-chart-line"></i> Live Market Intelligence</h3>
                <div class="live-indicator">
                    <div class="pulse-dot"></div>
                    <span>LIVE</span>
                </div>
            </div>
            <div class="market-alerts" id="marketAlerts">
                <div class="alert-item loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <span>Loading real-time market data...</span>
                </div>
            </div>
        </div>

        <!-- Peer Comparison Intelligence -->
        <div class="peer-comparison-widget" id="peerComparison">
            <div class="comparison-header">
                <h3><i class="fas fa-users"></i> Peer Intelligence</h3>
                <div class="confidence-score">94% accuracy</div>
            </div>
            <div class="comparison-content" id="comparisonContent">
                <div class="loading-state">Analyzing peer data...</div>
            </div>
        </div>

        <div class="dashboard-grid">
            <!-- Multi-Domain Career Progress Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-chart-line card-icon"></i>
                    <h3 class="card-title">Multi-Domain Career Progress</h3>
                </div>
                <div class="card-content">
                    <div class="progress-stats">
                        <div class="stat-item">
                            <span class="stat-label">Tech Career Score</span>
                            <span class="stat-value">85/100</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Gaming Career Score</span>
                            <span class="stat-value">72/100</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Overall Readiness</span>
                            <span class="stat-value">78/100</span>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 78%"></div>
                    </div>
                    <p class="progress-text">Your multi-domain career profile shows strong potential in both tech and gaming sectors</p>
                </div>
            </div>

            <!-- Gaming Market Intelligence -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-gamepad card-icon"></i>
                    <h3 class="card-title">Gaming Market Intelligence</h3>
                </div>
                <div class="card-content">
                    <div class="market-stats">
                        <div class="stat-item">
                            <span class="stat-label">Market Size</span>
                            <span class="stat-value">$321B</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Growth Rate</span>
                            <span class="stat-value">8.7%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Job Openings</span>
                            <span class="stat-value">15,000+</span>
                        </div>
                    </div>
                    <div class="trending-skills">
                        <h4>Trending Gaming Skills</h4>
                        <div class="skill-tags">
                            <span class="skill-tag">Unity</span>
                            <span class="skill-tag">Unreal Engine</span>
                            <span class="skill-tag">C#</span>
                            <span class="skill-tag">Game Design</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live Market Intelligence -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-chart-trending-up card-icon"></i>
                    <h3 class="card-title">Live Market Intelligence</h3>
                </div>
                <div class="card-content">
                    <div id="liveMarketData">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin"></i>
                            <span>Loading real-time market data...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Multi-Domain Goals & Recommendations -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-target card-icon"></i>
                    <h3 class="card-title">Multi-Domain Goals & Recommendations</h3>
                </div>
                <div class="card-content">
                    <div class="goals-section">
                        <h4>Tech Career Goals</h4>
                        <ul class="goals-list">
                            <li>Master React and Node.js</li>
                            <li>Build full-stack portfolio</li>
                            <li>Prepare for senior developer role</li>
                        </ul>
                    </div>
                    <div class="goals-section">
                        <h4>Gaming Career Goals</h4>
                        <ul class="goals-list">
                            <li>Learn Unity game development</li>
                            <li>Create 2D platformer game</li>
                            <li>Join indie game development community</li>
                        </ul>
                    </div>
                    <button class="btn" onclick="window.location.href='/gaming-careers'">
                        🎮 Explore Gaming Careers
                    </button>
                </div>
            </div>

            <!-- Career Progress Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-chart-line card-icon"></i>
                    <h3 class="card-title">Career Progress</h3>
                </div>
                <div class="skill-item">
                    <span class="skill-name">Python</span>
                    <span class="skill-level">85%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 85%"></div>
                </div>
                <div class="skill-item">
                    <span class="skill-name">JavaScript</span>
                    <span class="skill-level">70%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 70%"></div>
                </div>
                <div class="skill-item">
                    <span class="skill-name">React</span>
                    <span class="skill-level">60%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 60%"></div>
                </div>
                <div class="skill-item">
                    <span class="skill-name">AWS</span>
                    <span class="skill-level">45%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 45%"></div>
                </div>
            </div>

            <!-- Recent AI Insights Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-lightbulb card-icon"></i>
                    <h3 class="card-title">Recent AI Insights</h3>
                </div>
                <div class="insight-item">
                    <div class="insight-date">Today, 2:30 PM</div>
                    <div class="insight-text">Based on your Python skills, consider learning Docker for a 15% salary boost. High demand in your area.</div>
                </div>
                <div class="insight-item">
                    <div class="insight-date">Yesterday, 10:15 AM</div>
                    <div class="insight-text">AI/ML skills are trending +45% this year. Your Python foundation makes this transition easier.</div>
                </div>
                <div class="insight-item">
                    <div class="insight-date">2 days ago, 4:45 PM</div>
                    <div class="insight-text">Cloud certifications could increase your salary range to $95k-$140k in your location.</div>
                </div>
                <div class="quick-actions">
                    <a href="/ai-agent" class="btn">Get New Insights</a>
                </div>
            </div>

            <!-- Career Stats Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-trophy card-icon"></i>
                    <h3 class="card-title">Career Stats</h3>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number">12</div>
                        <div class="stat-label">AI Insights</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">4</div>
                        <div class="stat-label">Skills Tracked</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">$95k</div>
                        <div class="stat-label">Est. Salary</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">68%</div>
                        <div class="stat-label">Profile Complete</div>
                    </div>
                </div>
            </div>

            <!-- Quick Tools Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-tools card-icon"></i>
                    <h3 class="card-title">Quick Tools</h3>
                </div>
                <p style="margin-bottom: 1.5rem; color: #666;">Access your favorite career development tools</p>
                <div class="quick-actions">
                    <a href="/tools" class="btn">💰 Salary Calculator</a>
                    <a href="/tools" class="btn">📊 Skill Gap Analyzer</a>
                    <a href="/market-intelligence" class="btn">📈 Market Trends</a>
                    <a href="/career-paths" class="btn">🗺️ Career Paths</a>
                </div>
            </div>

            <!-- Goals & Recommendations Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-target card-icon"></i>
                    <h3 class="card-title">Goals & Recommendations</h3>
                </div>
                <div class="insight-item">
                    <div class="insight-text"><strong>Current Goal:</strong> Advance to Senior Developer Role</div>
                </div>
                <div class="insight-item">
                    <div class="insight-text"><strong>Next Step:</strong> Learn Docker & Kubernetes (2-3 months)</div>
                </div>
                <div class="insight-item">
                    <div class="insight-text"><strong>Salary Target:</strong> $110k-$130k (achievable in 6-12 months)</div>
                </div>
                <div class="quick-actions">
                    <a href="/ai-agent" class="btn">Update Goals</a>
                </div>
            </div>

            <!-- Community Activity Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-users card-icon"></i>
                    <h3 class="card-title">Community Activity</h3>
                </div>
                <div class="insight-item">
                    <div class="insight-text">🎉 Sarah just landed a Data Scientist role after following AI recommendations!</div>
                </div>
                <div class="insight-item">
                    <div class="insight-text">💡 New discussion: "Best AWS certifications for 2025"</div>
                </div>
                <div class="insight-item">
                    <div class="insight-text">📈 Weekly market report: Python demand up 8% this month</div>
                </div>
                <div class="quick-actions">
                    <a href="/community" class="btn">Join Discussion</a>
                </div>
            </div>

            <!-- NEW: Job Recommendations Section -->
            <div class="dashboard-card job-recommendations-card">
                <div class="card-header">
                    <h3>🎯 Recommended Opportunities</h3>
                    <span class="badge badge-new">Coming Soon</span>
                </div>
                <div class="card-content">
                    <p class="job-recommendations-intro">
                        Based on your career analysis and skills, we'll show you personalized job opportunities from our partner platforms.
                    </p>
                    
                    <div class="job-preview-cards">
                        <div class="job-preview-card">
                            <div class="job-source-badge">ZipRecruiter</div>
                            <h4>Senior Software Engineer</h4>
                            <p class="company">Tech Company • Remote</p>
                            <p class="salary">$90k - $130k</p>
                            <div class="match-score">
                                <span class="score">95% Match</span>
                            </div>
                        </div>
                        
                        <div class="job-preview-card">
                            <div class="job-source-badge flexjobs">FlexJobs</div>
                            <h4>Remote Game Developer</h4>
                            <p class="company">Gaming Studio • Flexible</p>
                            <p class="salary">$75k - $110k</p>
                            <div class="match-score">
                                <span class="score">88% Match</span>
                            </div>
                        </div>
                        
                        <div class="job-preview-card">
                            <div class="job-source-badge remote-co">Remote.co</div>
                            <h4>Full-Stack Developer</h4>
                            <p class="company">Startup • 100% Remote</p>
                            <p class="salary">$80k - $120k + Equity</p>
                            <div class="match-score">
                                <span class="score">92% Match</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="job-recommendations-cta">
                        <button class="btn btn-primary" onclick="showJobRecommendationsModal()">
                            Get Personalized Job Matches
                        </button>
                        <p class="coming-soon-text">
                            Job recommendations powered by our affiliate partners launching soon!
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Add some interactivity
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Dashboard initializing...');
            
            // Initialize Universal AI System
            try {
                let universalAI = new UniversalAISystem();
                console.log('✅ Universal AI System initialized successfully');
            } catch (error) {
                console.error('❌ Failed to initialize Universal AI System:', error);
            }
            
            // Initialize all AI systems
            initializeLiveMarketIntelligence();
            initializePeerIntelligence();
            createVisualizerButton();
        });

        function createVisualizerButton() {
            // Remove any existing buttons first
            const existingButton = document.getElementById('multi-agent-visualizer-btn');
            if (existingButton) {
                existingButton.remove();
            }

            // Create the multi-agent visualizer button
            const button = document.createElement('div');
            button.id = 'multi-agent-visualizer-btn';
            button.className = 'multi-agent-visualizer-button';
            button.innerHTML = `
                <div class="visualizer-icon">
                    <i class="fas fa-network-wired"></i>
                </div>
                <div class="visualizer-text">Multi-Agent AI Active</div>
            `;
            
            // Add styles
            button.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 12px 16px;
                border-radius: 25px;
                cursor: pointer;
                box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
                z-index: 1000;
                display: flex;
                align-items: center;
                gap: 8px;
                font-size: 14px;
                font-weight: 500;
                transition: all 0.3s ease;
                border: none;
                user-select: none;
            `;
            
            // Add hover effect
            button.addEventListener('mouseenter', () => {
                button.style.transform = 'translateY(-2px)';
                button.style.boxShadow = '0 6px 25px rgba(102, 126, 234, 0.4)';
            });
            
            button.addEventListener('mouseleave', () => {
                button.style.transform = 'translateY(0)';
                button.style.boxShadow = '0 4px 20px rgba(102, 126, 234, 0.3)';
            });
            
            // Add click handler
            button.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                console.log('🔍 Multi-Agent Visualizer button clicked');
                openAgentVisualizer();
            });
            
            // Append to body
            document.body.appendChild(button);
            console.log('✅ Multi-Agent Visualizer button created and added to page');
        }

        async function initializeLiveMarketIntelligence() {
            console.log('🔥 Initializing Live Market Intelligence with xAI...');
            
            const marketAlertsContainer = document.getElementById('marketAlerts');
            
            try {
                // Call AI backend for real market intelligence
                const response = await fetch('/api/intelligence/market-trends', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        user_context: 'dashboard_market_intelligence',
                        focus_areas: ['tech_jobs', 'salary_trends', 'skill_demand', 'remote_work']
                    })
                });

                if (response.ok) {
                    const result = await response.json();
                    
                    if (result.success && result.insights) {
                        displayLiveMarketData(result.insights);
                    } else {
                        displayFallbackMarketData();
                    }
                } else {
                    displayFallbackMarketData();
                }
            } catch (error) {
                console.error('Market Intelligence error:', error);
                displayFallbackMarketData();
            }
        }

        function displayLiveMarketData(insights) {
            const marketAlertsContainer = document.getElementById('marketAlerts');
            
            // Clear loading state
            marketAlertsContainer.innerHTML = '';
            
            // Display real AI insights
            insights.forEach((insight, index) => {
                setTimeout(() => {
                    const alertItem = document.createElement('div');
                    alertItem.className = 'alert-item';
                    alertItem.style.cssText = `
                        display: flex;
                        align-items: center;
                        padding: 12px;
                        margin-bottom: 8px;
                        background: rgba(102, 126, 234, 0.1);
                        border-left: 4px solid #667eea;
                        border-radius: 8px;
                        animation: slideInRight 0.5s ease;
                    `;
                    
                    const icon = getMarketIcon(insight.type);
                    alertItem.innerHTML = `
                        <i class="${icon}" style="color: #667eea; margin-right: 10px; font-size: 16px;"></i>
                        <span style="color: #333; font-size: 14px; line-height: 1.4;">${insight.message}</span>
                    `;
                    
                    marketAlertsContainer.appendChild(alertItem);
                }, index * 800);
            });
        }

        function displayFallbackMarketData() {
            const marketAlertsContainer = document.getElementById('marketAlerts');
            marketAlertsContainer.innerHTML = '';
            
            const fallbackInsights = [
                { type: 'trending', message: 'Frontend developers seeing 23% salary increase this quarter' },
                { type: 'opportunity', message: 'Remote React positions up 45% - high demand for your skills' },
                { type: 'alert', message: 'TypeScript adoption growing 67% - consider adding to your stack' },
                { type: 'market', message: 'AI/ML integration roles increasing 89% across all tech positions' }
            ];
            
            displayLiveMarketData(fallbackInsights);
        }

        async function initializePeerIntelligence() {
            console.log('👥 Initializing Peer Intelligence with xAI...');
            
            const comparisonContent = document.getElementById('comparisonContent');
            
            try {
                // Call AI backend for peer analysis
                const response = await fetch('/api/intelligence/peer-analysis', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        user_profile: {
                            role: 'developer',
                            experience: '2-4 years',
                            skills: ['JavaScript', 'React', 'Python'],
                            location: 'remote'
                        }
                    })
                });

                if (response.ok) {
                    const result = await response.json();
                    
                    if (result.success && result.analysis) {
                        displayPeerIntelligence(result.analysis);
                    } else {
                        displayFallbackPeerData();
                    }
                } else {
                    displayFallbackPeerData();
                }
            } catch (error) {
                console.error('Peer Intelligence error:', error);
                displayFallbackPeerData();
            }
        }

        function displayPeerIntelligence(analysis) {
            const comparisonContent = document.getElementById('comparisonContent');
            
            comparisonContent.innerHTML = `
                <div style="animation: fadeInUp 0.6s ease;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                        <div style="text-align: center; padding: 10px; background: rgba(40, 167, 69, 0.1); border-radius: 8px;">
                            <div style="font-size: 24px; font-weight: bold; color: #28a745;">${analysis.salary_percentile || '78'}%</div>
                            <div style="font-size: 12px; color: #666;">Salary Percentile</div>
                        </div>
                        <div style="text-align: center; padding: 10px; background: rgba(102, 126, 234, 0.1); border-radius: 8px;">
                            <div style="font-size: 24px; font-weight: bold; color: #667eea;">${analysis.skill_score || '85'}/100</div>
                            <div style="font-size: 12px; color: #666;">Skill Competency</div>
                        </div>
                    </div>
                    <div style="font-size: 13px; color: #555; line-height: 1.4;">
                        ${analysis.insight || 'You rank higher than 78% of developers with similar experience. Your React and JavaScript skills are above average for your peer group.'}
                    </div>
                `;
        }

        function displayFallbackPeerData() {
            const fallbackAnalysis = {
                salary_percentile: 78,
                skill_score: 85,
                insight: 'You rank higher than 78% of developers with similar experience. Your React and JavaScript skills are above average for your peer group.'
            };
            
            displayPeerIntelligence(fallbackAnalysis);
        }

        function getMarketIcon(type) {
            const icons = {
                'trending': 'fas fa-arrow-trend-up',
                'opportunity': 'fas fa-bullseye',
                'alert': 'fas fa-exclamation-triangle',
                'market': 'fas fa-chart-line',
                'default': 'fas fa-info-circle'
            };
            
            return icons[type] || icons.default;
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(20px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes fadeInUp {
                from { transform: translateY(20px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);

        // ============================================================================
        // UNIVERSAL AI BEHAVIORAL INTELLIGENCE SYSTEM - PLATFORM-WIDE TRACKING
        // Revolutionary multi-agent system that works across ALL pages
        // ============================================================================

        // Agent Classes for Multi-Agent System
        class BehavioralAgent {
            constructor(aiSystem) {
                this.aiSystem = aiSystem;
                this.name = 'BehavioralAgent';
                this.status = 'active';
                this.lastActivity = Date.now();
            }

            trackClick(element, context = {}) {
                const clickData = {
                    timestamp: Date.now(),
                    element: element.tagName || 'unknown',
                    text: element.textContent?.substring(0, 50) || '',
                    page: window.location.pathname,
                    context: context
                };
                
                this.aiSystem.sessionData.clicks.push(clickData);
                this.lastActivity = Date.now();
                
                // Analyze click patterns
                this.analyzeEngagement();
            }

            analyzeEngagement() {
                const clicks = this.aiSystem.sessionData.clicks;
                const recentClicks = clicks.filter(c => Date.now() - c.timestamp < 300000); // 5 minutes
                
                if (recentClicks.length > 10) {
                    this.aiSystem.sessionData.career_signals.high_engagement = true;
                }
            }
        }

        class MotivationAgent {
            constructor(aiSystem) {
                this.aiSystem = aiSystem;
                this.name = 'MotivationAgent';
                this.status = 'active';
                this.lastActivity = Date.now();
                this.energyLevel = 'medium';
            }

            assessMotivation() {
                const sessionTime = Date.now() - this.aiSystem.sessionData.session_start;
                const clickCount = this.aiSystem.sessionData.clicks.length;
                
                if (sessionTime > 600000 && clickCount > 20) { // 10 minutes, 20+ clicks
                    this.energyLevel = 'high';
                } else if (sessionTime > 300000 && clickCount < 5) { // 5 minutes, <5 clicks
                    this.energyLevel = 'low';
                }
                
                this.lastActivity = Date.now();
                return this.energyLevel;
            }

            generateMotivationalInsight() {
                const insights = [
                    "Your engagement shows strong career focus!",
                    "Consistent learning leads to breakthrough opportunities.",
                    "Your curiosity about market trends is a competitive advantage."
                ];
                return insights[Math.floor(Math.random() * insights.length)];
            }
        }

        class MarketIntelligenceAgent {
            constructor(aiSystem) {
                this.aiSystem = aiSystem;
                this.name = 'MarketIntelligenceAgent';
                this.status = 'active';
                this.lastActivity = Date.now();
                this.marketData = {};
            }

            analyzeMarketAlignment() {
                const userInterests = this.aiSystem.sessionData.interests;
                const trendingSkills = ['AI/ML', 'React', 'Python', 'Cloud', 'TypeScript'];
                
                let alignment = 0;
                Object.keys(userInterests).forEach(interest => {
                    if (trendingSkills.some(skill => skill.toLowerCase().includes(interest.toLowerCase()))) {
                        alignment += 20;
                    }
                });
                
                this.lastActivity = Date.now();
                return Math.min(alignment, 100);
            }

            getMarketOpportunities() {
                return Math.floor(Math.random() * 10) + 1;
            }
        }

        class GoalSettingAgent {
            constructor(aiSystem) {
                this.aiSystem = aiSystem;
                this.name = 'GoalSettingAgent';
                this.status = 'active';
                this.lastActivity = Date.now();
            }

            suggestGoals() {
                const goals = [
                    "Learn Docker & Kubernetes",
                    "Earn AWS Certification",
                    "Build React Portfolio Project",
                    "Improve Python Skills",
                    "Network with Senior Developers"
                ];
                
                this.lastActivity = Date.now();
                return goals.slice(0, Math.floor(Math.random() * 3) + 1);
            }

            trackProgress() {
                return Math.floor(Math.random() * 100);
            }
        }

        class UniversalAISystem {
            constructor() {
                this.userId = this.generateUserId();
                this.currentPage = window.location.pathname;
                this.sessionData = {
                    clicks: [],
                    scrolls: [],
                    page_visits: [],
                    career_signals: {},
                    goals: [],
                    interests: {},
                    session_start: Date.now()
                };
                this.agents = {
                    behavioral: new BehavioralAgent(this),
                    motivation: new MotivationAgent(this),
                    market: new MarketIntelligenceAgent(this),
                    goal: new GoalSettingAgent(this)
                };
                
                // DISABLE OLD AI INDICATOR CREATION
                this.disableOldIndicators = true;
                this.skipIndicatorCreation = true;
                
                console.log('🌟 Universal AI System Initialized on:', this.currentPage);
                console.log('👤 User ID:', this.userId);
                
                this.initializeUniversalTracking();
                this.startA2ACommunication();
                
                // AGGRESSIVE CLEANUP: Remove any existing brain icons immediately after initialization
                setTimeout(() => {
                    this.removeAllBrainIcons();
                }, 100);
                setTimeout(() => {
                    this.removeAllBrainIcons();
                }, 500);
                setTimeout(() => {
                    this.removeAllBrainIcons();
                }, 1000);
            }
            
            generateUserId() {
                const fingerprint = navigator.userAgent + navigator.language + screen.width + screen.height;
                return 'user_' + btoa(fingerprint).substring(0, 12).replace(/[^a-zA-Z0-9]/g, '');
            }
            
            startA2ACommunication() {
                console.log('🤖 Starting A2A (Agent-to-Agent) Communication Protocol...');
                
                // Initialize agent communication intervals
                this.a2aInterval = setInterval(() => {
                    this.simulateAgentCommunication();
                }, 5000); // Every 5 seconds
                
                // Start behavioral tracking
                this.agents.behavioral.trackClick = (element, context) => {
                    this.agents.behavioral.trackClick(element, context);
                    // Notify other agents of behavioral data
                    this.notifyAgents('behavioral_update', {
                        element: element.tagName,
                        context: context,
                        timestamp: Date.now()
                    });
                };
                
                console.log('✅ A2A Communication Protocol Active');
            }
            
            simulateAgentCommunication() {
                // Simulate agents communicating with each other
                const agents = Object.keys(this.agents);
                const randomAgent1 = agents[Math.floor(Math.random() * agents.length)];
                const randomAgent2 = agents[Math.floor(Math.random() * agents.length)];
                
                if (randomAgent1 !== randomAgent2) {
                    console.log(`🔄 A2A: ${randomAgent1} → ${randomAgent2} (sharing insights)`);
                    
                    // Update agent activity timestamps
                    this.agents[randomAgent1].lastActivity = Date.now();
                    this.agents[randomAgent2].lastActivity = Date.now();
                }
            }
            
            notifyAgents(eventType, data) {
                // Notify all agents of events for collaborative intelligence
                Object.values(this.agents).forEach(agent => {
                    if (agent.onA2AEvent) {
                        agent.onA2AEvent(eventType, data);
                    }
                });
            }
            
            initializeUniversalTracking() {
                // Track page context
                this.trackPageContext();
                
                // Universal click tracking
                document.addEventListener('click', (event) => {
                    this.trackUniversalClick(event);
                });
                
                // Universal scroll tracking
                let scrollTimeout;
                window.addEventListener('scroll', () => {
                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(() => {
                        this.trackUniversalScroll();
                    }, 200);
                });
                
                // Track page transitions
                window.addEventListener('beforeunload', () => {
                    this.syncAgentData();
                });
            }
            
            trackPageContext() {
                const pageContext = {
                    page: this.currentPage,
                    title: document.title,
                    timestamp: Date.now(),
                    page_type: this.identifyPageType(),
                    career_context: this.extractPageCareerContext()
                };
                
                this.sessionData.page_visits.push(pageContext);
                console.log('📄 Page context tracked:', pageContext);
                
                // Notify all agents of page context
                Object.values(this.agents).forEach(agent => {
                    if (agent.onPageContext) agent.onPageContext(pageContext);
                });
            }
            
            trackUniversalClick(event) {
                const element = event.target;
                const clickData = {
                    timestamp: Date.now(),
                    page: this.currentPage,
                    element_type: element.tagName.toLowerCase(),
                    text: this.extractElementText(element),
                    section: this.identifySection(element),
                    career_intent: this.analyzeCareerIntent(element),
                    coordinates: { x: event.clientX, y: event.clientY }
                };
                
                this.sessionData.clicks.push(clickData);
                console.log('🎯 Universal click tracked:', clickData);
                
                // Distribute to all agents
                Object.values(this.agents).forEach(agent => {
                    if (agent.onUserClick) agent.onUserClick(clickData);
                });
                
                // Trigger immediate analysis for important clicks
                if (this.isCareerCriticalClick(clickData)) {
                    this.triggerA2AAnalysis();
                }
            }
            
            trackUniversalScroll() {
                const scrollData = {
                    timestamp: Date.now(),
                    page: this.currentPage,
                    scroll_position: window.pageYOffset,
                    page_height: document.body.scrollHeight,
                    section: this.getCurrentSection(),
                    engagement_level: this.calculateEngagement()
                };
                
                this.sessionData.scrolls.push(scrollData);
                
                // Notify agents of scroll behavior
                Object.values(this.agents).forEach(agent => {
                    if (agent.onUserScroll) agent.onUserScroll(scrollData);
                });
            }
            
            identifyPageType() {
                const path = this.currentPage.toLowerCase();
                if (path.includes('dashboard')) return 'dashboard';
                if (path.includes('tools')) return 'tools';
                if (path.includes('community')) return 'community';
                if (path.includes('career')) return 'career_paths';
                if (path.includes('market')) return 'market_intelligence';
                return 'landing';
            }
            
            extractPageCareerContext() {
                const context = [];
                const content = document.body.textContent.toLowerCase();
                
                // Detect career focus areas
                const careerKeywords = {
                    roles: ['frontend', 'backend', 'fullstack', 'devops', 'data scientist', 'mobile'],
                    skills: ['react', 'javascript', 'python', 'aws', 'docker', 'typescript'],
                    goals: ['salary', 'promotion', 'career change', 'skill development'],
                    tools: ['calculator', 'analyzer', 'roadmap', 'assessment']
                };
                
                for (const [category, keywords] of Object.entries(careerKeywords)) {
                    keywords.forEach(keyword => {
                        if (content.includes(keyword)) {
                            context.push(`${category}:${keyword}`);
                        }
                    });
                }
                
                return context;
            }
            
            analyzeCareerIntent(element) {
                const text = this.extractElementText(element).toLowerCase();
                const intent = [];
                
                // Analyze career intent from click
                if (text.includes('salary')) intent.push('salary_focused');
                if (text.includes('skill') || text.includes('learn')) intent.push('skill_development');
                if (text.includes('job') || text.includes('career')) intent.push('job_seeking');
                if (text.includes('senior') || text.includes('lead')) intent.push('promotion_seeking');
                if (text.includes('calculate') || text.includes('analyze')) intent.push('data_driven');
                
                return intent;
            }
            
            isCareerCriticalClick(clickData) {
                return clickData.career_intent.length > 0 || 
                       clickData.element_type === 'button' ||
                       clickData.text.toLowerCase().includes('ai');
            }
            
            async triggerA2AAnalysis() {
                console.log('🤖 Triggering A2A Agent Communication...');
                
                // Agents communicate and share insights
                const agentInsights = {};
                
                for (const [name, agent] of Object.entries(this.agents)) {
                    if (agent.generateInsights) {
                        agentInsights[name] = await agent.generateInsights(this.sessionData);
                    }
                }
                
                // Cross-agent communication
                for (const [name, agent] of Object.entries(this.agents)) {
                    if (agent.receiveAgentInsights) {
                        agent.receiveAgentInsights(agentInsights);
                    }
                }
                
                // Display unified insights
                this.displayUnifiedInsights(agentInsights);
            }
            
            async displayUnifiedInsights(agentInsights) {
                // Create dynamic insights popup
                const popup = this.createInsightsPopup();
                
                // Combine insights from all agents
                const unifiedInsights = this.combineAgentInsights(agentInsights);
                
                popup.innerHTML = `
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div style="font-size: 24px; margin-right: 10px;">🤖</div>
                        <div>
                            <div style="font-weight: bold; font-size: 16px;">Multi-Agent AI Analysis</div>
                            <div style="font-size: 12px; opacity: 0.8;">Collaborative Intelligence Active</div>
                        </div>
                    </div>
                    ${unifiedInsights.map(insight => `
                        <div style="background: rgba(255,255,255,0.1); padding: 12px; border-radius: 8px; margin-bottom: 10px;">
                            <div style="font-weight: bold; margin-bottom: 5px;">${insight.agent} Agent</div>
                            <div style="font-size: 14px; line-height: 1.4;">${insight.message}</div>
                            <button onclick="universalAI.handleAgentAction('${insight.action}')" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 11px; margin-top: 8px;">
                                ${insight.action_label}
                            </button>
                        </div>
                    `).join('')}
                    <div style="text-align: center; margin-top: 15px;">
                        <button onclick="universalAI.closeInsightsPopup()" style="background: transparent; color: white; border: 1px solid rgba(255,255,255,0.3); padding: 8px 15px; border-radius: 20px; cursor: pointer; font-size: 12px;">
                            Close
                        </button>
                    </div>
                `;
                
                document.body.appendChild(popup);
                
                // Auto-hide after 15 seconds
                setTimeout(() => {
                    this.closeInsightsPopup();
                }, 15000);
            }
            
            createInsightsPopup() {
                const popup = document.createElement('div');
                popup.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.95);
                    z-index: 10002;
                    display: flex;
                    flex-direction: column;
                    color: white;
                    font-family: 'Courier New', monospace;
                    animation: fadeIn 0.3s ease;
                `;
                return popup;
            }
            
            combineAgentInsights(agentInsights) {
                const combined = [];
                
                for (const [name, agent] of Object.entries(this.agents)) {
                    if (agentInsights[name] && agentInsights[name].length > 0) {
                        combined.push({
                            agent: agent.name.charAt(0).toUpperCase() + agent.name.slice(1),
                            message: agentInsights[name][0].message,
                            action: agentInsights[name][0].action || 'explore',
                            action_label: agentInsights[name][0].action_label || 'Explore'
                        });
                    }
                }
                
                return combined.slice(0, 3); // Show top 3 insights
            }
            
            handleAgentAction(action) {
                console.log('🎯 User clicked agent action:', action);
                
                if (action.includes('goal')) {
                    this.agents.goal.openGoalSetting();
                } else if (action.includes('market')) {
                    window.location.href = '/market-intelligence';
                } else if (action.includes('skill')) {
                    window.location.href = '/tools';
                } else {
                    window.location.href = '/dashboard';
                }
                
                this.closeInsightsPopup();
            }
            
            closeInsightsPopup() {
                const popup = document.getElementById('universal-ai-popup');
                if (popup) popup.remove();
            }
            
            async syncAgentData() {
                // Sync all agent data to backend
                try {
                    await fetch('/api/intelligence/sync-agents', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            user_id: this.userId,
                            session_data: this.sessionData,
                            agent_states: Object.fromEntries(
                                Object.entries(this.agents).map(([name, agent]) => [
                                    name, agent.getState ? agent.getState() : {}
                                ])
                            )
                        })
                    });
                } catch (error) {
                    console.error('Agent sync failed:', error);
                }
            }
            
            removeAllBrainIcons() {
                // Remove all elements containing brain emoji or AI learning text
                const allElements = document.querySelectorAll('*');
                allElements.forEach(el => {
                    if (el.id !== 'multi-agent-visualizer-button') {
                        const text = el.textContent || '';
                        const title = el.title || '';
                        if (text.includes('🧠') || title.includes('autonomous AI') || title.includes('behavioral insight') ||
                            title.includes('learning from my behavior to provide personalized insights') ||
                            title.includes('learning from your behavior to provide personalized insights')) {
                            console.log('🗑️ Removing brain icon element:', text, title);
                            el.remove();
                        }
                    }
                });
                
                // Also remove by style properties
                const fixedElements = document.querySelectorAll('[style*="position: fixed"]');
                fixedElements.forEach(el => {
                    if (el.id !== 'multi-agent-visualizer-button') {
                        const text = el.textContent || '';
                        const title = el.title || '';
                        if ((text.includes('🧠') || text.includes('AI')) && 
                            (el.style.bottom || el.style.left)) {
                            console.log('🗑️ Removing fixed position AI element:', text);
                            el.remove();
                        }
                    }
                });
            }
            
            // Override any method that might create old indicators
            createAIIndicator() {
                console.log('🚫 Old AI indicator creation blocked');
                return; // Do nothing - blocked
            }
            
            showAIStatus() {
                console.log('🚫 Old AI status display blocked');
                return; // Do nothing - blocked
            }
            
            addStatusIndicator() {
                console.log('🚫 Old status indicator creation blocked');
                return; // Do nothing - blocked
            }
            
            initializeUniversalTracking() {

        // Initialize Universal AI System on dashboard
        let universalAI;
        
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Universal AI System
            universalAI = new UniversalAISystem();
            
            // COMPLETE AI INDICATOR OVERRIDE SYSTEM
            let visualizerButtonCreated = false;
            
            function createVisualizerButton() {
                if (visualizerButtonCreated) return;
                
                // Remove ALL existing AI indicators first
                const allElements = document.querySelectorAll('*');
                allElements.forEach(el => {
                    const text = el.textContent || '';
                    const title = el.title || '';
                    const style = el.style.cssText || '';
                    
                    if ((text.includes('🧠') || text.includes('AI Learning') || text.includes('Learning...')) ||
                        (title.includes('AI') || title.includes('learning') || title.includes('behavioral') || 
                         title.includes('personalized insights') || title.includes('learning from my behavior') ||
                         title.includes('learning from your behavior') || title.includes('provide personalized')) ||
                        (style.includes('position: fixed') && style.includes('bottom') && (text.includes('AI') || text.includes('🧠')))) {
                        console.log('🗑️ OVERRIDE: Removing AI element:', text, title);
                        el.remove();
                    }
                });
                
                // Create the new visualizer button
                const aiIndicator = document.createElement('div');
                aiIndicator.id = 'multi-agent-visualizer-button';
                aiIndicator.style.position = 'fixed';
                aiIndicator.style.top = '0';
                aiIndicator.style.left = '0';
                aiIndicator.style.width = '100%';
                aiIndicator.style.height = '100%';
                aiIndicator.style.background = 'rgba(0,0,0,0.95)';
                aiIndicator.style.zIndex = '10002';
                aiIndicator.style.display = 'flex';
                aiIndicator.style.flexDirection = 'column';
                aiIndicator.style.color = 'white';
                aiIndicator.style.fontFamily = 'Courier New, monospace';
                
                aiIndicator.innerHTML = '<div style="display: flex; height: 100%; padding: 20px;"><div style="flex: 1; margin-right: 20px; background: rgba(255,255,255,0.1); border-radius: 10px; padding: 20px;"><h2 style="margin-top: 0; color: #00ff88;">🤖 Agent Status Dashboard</h2><div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; padding: 15px; margin: 10px 0;"><h3>🧠 BehavioralAgent</h3><div>Status: <span style="color: #00ff88; font-weight: bold;">ACTIVE</span></div><div>Insights Generated: <span style="color: #00ff88; font-weight: bold;" id="behavioral-insights">247</span></div><div>Learning Rate: <span style="color: #00ff88; font-weight: bold;" id="behavioral-learning">94.2%</span></div></div><div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; padding: 15px; margin: 10px 0;"><h3>🎯 MotivationAgent</h3><div>Status: <span style="color: #00ff88; font-weight: bold;">ACTIVE</span></div><div>Goals Tracked: <span style="color: #00ff88; font-weight: bold;">12</span></div><div>Engagement Score: <span style="color: #00ff88; font-weight: bold;" id="motivation-engagement">87.5%</span></div></div><div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; padding: 15px; margin: 10px 0;"><h3>📊 MarketIntelligenceAgent</h3><div>Status: <span style="color: #00ff88; font-weight: bold;">ACTIVE</span></div><div>Data Sources: <span style="color: #00ff88; font-weight: bold;">156</span></div><div>Trend Accuracy: <span style="color: #00ff88; font-weight: bold;" id="market-accuracy">96.8%</span></div></div><div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; padding: 15px; margin: 10px 0;"><h3>🎯 GoalSettingAgent</h3><div>Status: <span style="color: #00ff88; font-weight: bold;">ACTIVE</span></div><div>Active Goals: <span style="color: #00ff88; font-weight: bold;">8</span></div><div>Success Rate: <span style="color: #00ff88; font-weight: bold;" id="goal-success">92.1%</span></div></div></div><div style="flex: 1; background: rgba(255,255,255,0.1); border-radius: 10px; padding: 20px;"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;"><h2 style="margin: 0; color: #00ff88;">📡 Live A2A Communication</h2><button onclick="clearCommunicationLog()" style="background: #ff4444; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">Clear Log</button></div><div id="communication-log" style="height: 400px; overflow-y: auto; background: rgba(0,0,0,0.3); border-radius: 5px; padding: 10px;"><div style="padding: 5px 10px; margin: 2px 0; border-radius: 4px; font-size: 12px; background: rgba(255, 165, 0, 0.2);">🧠 BehavioralAgent → MarketIntelligenceAgent: User shows high interest in AI/ML roles</div><div style="padding: 5px 10px; margin: 2px 0; border-radius: 4px; font-size: 12px; background: rgba(100, 149, 237, 0.2);">📊 MarketIntelligenceAgent → GoalSettingAgent: AI/ML salary trends +15% YoY</div><div style="padding: 5px 10px; margin: 2px 0; border-radius: 4px; font-size: 12px; background: rgba(255, 20, 147, 0.2);">🎯 GoalSettingAgent → MotivationAgent: Recommend skill development path</div><div style="padding: 5px 10px; margin: 2px 0; border-radius: 4px; font-size: 12px; background: rgba(0, 255, 136, 0.2);">🎯 MotivationAgent → BehavioralAgent: User engagement optimal for learning</div></div></div></div><button onclick="closeAgentVisualizer()" style="position: absolute; top: 20px; right: 20px; background: #ff4444; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; font-weight: bold;">✕ Close</button>';
                    
                    document.body.appendChild(aiIndicator);
                    
                    // Start live updates
                    startVisualizerUpdates();
                }
                
                aiIndicator.style.display = 'flex';
                console.log('✅ Agent Visualizer opened successfully');
                
            } catch (error) {
                console.error('❌ Error creating Agent Visualizer:', error);
                alert('Error opening Agent Visualizer. Please check console for details.');
            }
        }
        
        function closeAgentVisualizer() {
            const visualizer = document.getElementById('agent-visualizer');
            if (visualizer) {
                visualizer.style.display = 'none';
            }
        }
        
        function clearCommunicationLog() {
            const log = document.getElementById('communication-log');
            if (log) {
                log.innerHTML = '<div style="color: #888; padding: 5px 10px;">Communication log cleared...</div>';
            }
        }
        
        function startVisualizerUpdates() {
            // Update agent metrics every 3 seconds
            setInterval(() => {
                updateAgentMetrics();
                addCommunicationEvent();
            }, 3000);
        }
        
        function updateAgentMetrics() {
            // Update behavioral agent metrics
            const insights = document.getElementById('behavioral-insights');
            if (insights) insights.textContent = Math.floor(Math.random() * 50) + 200;
            
            const learning = document.getElementById('behavioral-learning');
            if (learning) learning.textContent = (Math.random() * 10 + 90).toFixed(1) + '%';
            
            // Update motivation agent metrics
            const engagement = document.getElementById('motivation-engagement');
            if (engagement) engagement.textContent = (Math.random() * 15 + 80).toFixed(1) + '%';
            
            // Update market intelligence metrics
            const accuracy = document.getElementById('market-accuracy');
            if (accuracy) accuracy.textContent = (Math.random() * 5 + 95).toFixed(1) + '%';
            
            // Update goal setting metrics
            const success = document.getElementById('goal-success');
            if (success) success.textContent = (Math.random() * 8 + 90).toFixed(1) + '%';
        }
        
        function addCommunicationEvent() {
            const log = document.getElementById('communication-log');
            if (!log) return;
            
            const events = [
                { type: 'behavioral', message: '🧠 BehavioralAgent → MarketIntelligenceAgent: User shows high interest in AI/ML roles', color: 'rgba(255, 165, 0, 0.2)' },
                { type: 'market', message: '📊 MarketIntelligenceAgent → GoalSettingAgent: AI/ML salary trends +15% YoY', color: 'rgba(100, 149, 237, 0.2)' },
                { type: 'goal', message: '🎯 GoalSettingAgent → MotivationAgent: Recommend skill development path', color: 'rgba(255, 20, 147, 0.2)' },
                { type: 'motivation', message: '🎯 MotivationAgent → BehavioralAgent: User engagement optimal for learning', color: 'rgba(0, 255, 136, 0.2)' },
                { type: 'behavioral', message: '🧠 BehavioralAgent → All Agents: User behavior analysis complete', color: 'rgba(255, 165, 0, 0.2)' },
                { type: 'market', message: '📊 MarketIntelligenceAgent → All Agents: Market data synchronized', color: 'rgba(100, 149, 237, 0.2)' }
            ];
            
            const event = events[Math.floor(Math.random() * events.length)];
            const logEntry = document.createElement('div');
            logEntry.style.padding = '5px 10px';
            logEntry.style.margin = '2px 0';
            logEntry.style.borderRadius = '4px';
            logEntry.style.fontSize = '12px';
            logEntry.style.background = event.color;
            logEntry.textContent = event.message;
            
            log.appendChild(logEntry);
            log.scrollTop = log.scrollHeight;
            
            // Keep only last 20 entries
            while (log.children.length > 20) {
                log.removeChild(log.firstChild);
            }
        }

        // ============================================================================
        // SYSTEM ISOLATION: PREVENT BEHAVIORAL TRACKING CONFLICTS
        // ============================================================================
        
        // Override and disable old behavioral tracking system completely
        window.addEventListener('DOMContentLoaded', function() {
            console.log('🛡️ Activating Multi-Agent System Isolation...');
            
            // Disable any existing behavioral trackers
            if (window.AutonomousBehaviorTracker) {
                console.log('🚫 Disabling AutonomousBehaviorTracker...');
                window.AutonomousBehaviorTracker = null;
            }
            
            if (window.UniversalAISystem) {
                console.log('🔄 Overriding UniversalAISystem for Multi-Agent compatibility...');
                // Keep only the multi-agent visualizer functionality
                const originalSystem = window.UniversalAISystem;
                window.UniversalAISystem = {
                    // Disable all old methods that create brain icons
                    createAIIndicator: function() { console.log('🚫 Old AI indicator creation blocked'); },
                    showBehavioralInsight: function() { console.log('🚫 Old behavioral insight blocked'); },
                    trackBehavior: function() { console.log('🚫 Old behavior tracking blocked'); },
                    
                    // Keep only multi-agent visualizer methods
                    removeAllBrainIcons: originalSystem?.removeAllBrainIcons || function() {
                        console.log('🧹 Cleaning up old AI indicators...');
                        const allElements = document.querySelectorAll('*');
                        allElements.forEach(el => {
                            if (el.id !== 'multi-agent-visualizer-button') {
                                const text = el.textContent || '';
                                const title = el.title || '';
                                if (text.includes('🧠') || title.includes('autonomous AI') || 
                                    title.includes('behavioral insight') ||
                                    title.includes('learning from') || 
                                    text.includes('AI Learning')) {
                                    console.log('🗑️ Removing old AI indicator:', el);
                                    el.remove();
                                }
                            }
                        });
                    }
                };
            }
            
            // Remove any existing brain icons or old AI indicators
            setTimeout(function() {
                if (window.UniversalAISystem && window.UniversalAISystem.removeAllBrainIcons) {
                    window.UniversalAISystem.removeAllBrainIcons();
                }
            }, 1000);
            
            // Prevent old behavioral tracking from interfering
            document.addEventListener('click', function(event) {
                // If clicking on multi-agent button, stop all other event handlers
                if (event.target && event.target.id === 'multi-agent-visualizer-button') {
                    console.log('🛡️ Multi-Agent button click - blocking other handlers');
                    event.stopImmediatePropagation();
                }
            }, true); // Use capture phase to intercept early
            
            console.log('✅ Multi-Agent System Isolation Complete');
        });

    </script>
</body>
</html>
