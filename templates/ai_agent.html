<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Agent - SkillSync AI Platform</title>
    <meta name="description" content="Intelligent AI career agent providing personalized guidance, automated insights, and proactive recommendations.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
          --primary-50: #f8fafc; --primary-100: #f1f5f9; --primary-200: #e2e8f0; --primary-300: #cbd5e1; --primary-400: #94a3b8; --primary-500: #64748b; --primary-600: #475569; --primary-700: #334155; --primary-800: #1e293b; --primary-900: #0f172a;
          --secondary-50: #f8fafc; --secondary-100: #f1f5f9; --secondary-200: #e2e8f0; --secondary-300: #cbd5e1; --secondary-400: #94a3b8; --secondary-500: #64748b; --secondary-600: #475569; --secondary-700: #334155; --secondary-800: #1e293b; --secondary-900: #0f172a;
          --gray-50: #fafbfc; --gray-100: #f4f6f8; --gray-200: #e6eaee; --gray-300: #d2d9e0; --gray-400: #a0aec0; --gray-500: #68768a; --gray-600: #4a5568; --gray-700: #2d3748; --gray-800: #1a202c; --gray-900: #171923;
          --success: #48bb78; --warning: #ed8936; --error: #f56565; --info: #4299e1;
          --font-primary: 'Inter', sans-serif; --font-display: 'Plus Jakarta Sans', sans-serif;
          --text-sm: 0.875rem; --text-base: 1rem; --text-lg: 1.125rem; --text-xl: 1.25rem; --text-2xl: 1.5rem; --text-3xl: 1.875rem;
          --space-2: 0.5rem; --space-3: 0.75rem; --space-4: 1rem; --space-6: 1.5rem; --space-8: 2rem; --space-12: 3rem; --space-16: 4rem;
          --radius-lg: 0.75rem; --radius-xl: 1rem; --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1); --transition-fast: 150ms ease-in-out;
        }
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body { font-family: var(--font-primary); font-size: var(--text-base); line-height: 1.6; color: var(--gray-800); background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); min-height: 100vh; }
        .navbar { background: white; border-bottom: 1px solid var(--gray-200); padding: var(--space-4) 0; position: sticky; top: 0; z-index: 1020; box-shadow: var(--shadow-sm); }
        .nav-container { display: flex; justify-content: space-between; align-items: center; max-width: 1280px; margin: 0 auto; padding: 0 var(--space-4); }
        .logo { font-family: var(--font-display); font-size: var(--text-xl); font-weight: 800; color: var(--primary-600); text-decoration: none; }
        .nav-links { display: flex; gap: var(--space-8); list-style: none; align-items: center; }
        .nav-links a { text-decoration: none; color: var(--gray-700); font-weight: 500; font-size: var(--text-sm); transition: color var(--transition-fast); }
        .nav-links a:hover { color: var(--primary-600); }
        .btn { display: inline-flex; align-items: center; gap: var(--space-2); padding: var(--space-3) var(--space-6); font-size: var(--text-sm); font-weight: 600; text-decoration: none; border: none; border-radius: var(--radius-lg); cursor: pointer; transition: all var(--transition-fast); }
        .btn-primary { background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); color: white; box-shadow: var(--shadow-lg); }
        .btn-secondary { background: var(--gray-100); color: var(--gray-700); border: 1px solid var(--gray-300); }
        .btn:hover { transform: translateY(-2px); }
        .card { background: white; border: 1px solid var(--gray-200); border-radius: var(--radius-xl); padding: var(--space-6); box-shadow: var(--shadow-lg); transition: all var(--transition-fast); }
        .card:hover { transform: translateY(-4px); }
        .container { max-width: 1280px; margin: 0 auto; padding: 0 var(--space-4); }
        .grid { display: grid; gap: var(--space-6); }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        .hero { padding: var(--space-16) 0; text-align: center; }
        .hero h1 { font-family: var(--font-display); font-size: var(--text-3xl); font-weight: 800; margin-bottom: var(--space-6); color: var(--gray-800); }
        .interactive-controls { display: flex; gap: var(--space-4); margin-bottom: var(--space-6); justify-content: center; flex-wrap: wrap; }
        .data-section { margin: var(--space-8) 0; }
        .section-title { color: var(--gray-800); font-size: var(--text-2xl); font-weight: 700; margin-bottom: var(--space-6); text-align: center; }
        
        /* Chat Interface Styles */
        .chat-container { height: 500px; display: flex; flex-direction: column; background: white; border-radius: var(--radius-xl); overflow: hidden; }
        .chat-header { background: linear-gradient(135deg, var(--primary-600), var(--primary-700)); color: white; padding: var(--space-4); text-align: center; font-weight: 600; }
        .chat-messages { flex: 1; overflow-y: auto; padding: var(--space-4); display: flex; flex-direction: column; gap: var(--space-3); }
        .message { max-width: 80%; padding: var(--space-3) var(--space-4); border-radius: var(--radius-lg); }
        .message.user { background: var(--primary-500); color: white; align-self: flex-end; border-bottom-right-radius: var(--space-2); }
        .message.ai { background: var(--gray-100); color: var(--gray-800); align-self: flex-start; border-bottom-left-radius: var(--space-2); }
        .message.ai .typing { display: inline-block; width: 8px; height: 8px; border-radius: 50%; background: var(--gray-500); animation: typing 1.4s infinite; }
        .message.ai .typing:nth-child(2) { animation-delay: 0.2s; }
        .message.ai .typing:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-10px); } }
        
        .chat-input-container { border-top: 1px solid var(--gray-200); padding: var(--space-4); display: flex; gap: var(--space-3); }
        .chat-input { flex: 1; padding: var(--space-3); border: 1px solid var(--gray-300); border-radius: var(--radius-lg); font-size: var(--text-sm); }
        .chat-input:focus { outline: none; border-color: var(--primary-500); }
        .send-btn { background: var(--primary-500); color: white; border: none; padding: var(--space-3) var(--space-4); border-radius: var(--radius-lg); cursor: pointer; transition: all var(--transition-fast); }
        .send-btn:hover { background: var(--primary-600); }
        .send-btn:disabled { background: var(--gray-400); cursor: not-allowed; }
        
        /* Agent Status Indicators */
        .status-indicator { display: inline-flex; align-items: center; gap: var(--space-2); font-size: var(--text-sm); }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; }
        .status-online { background: var(--success); animation: pulse 2s infinite; }
        .status-thinking { background: var(--warning); animation: pulse 1s infinite; }
        .status-offline { background: var(--gray-400); }
        
        /* Quick Actions */
        .quick-actions { display: flex; gap: var(--space-2); margin-bottom: var(--space-4); flex-wrap: wrap; }
        .quick-action { background: var(--gray-100); color: var(--gray-700); padding: var(--space-2) var(--space-3); border-radius: var(--radius-lg); font-size: var(--text-sm); cursor: pointer; transition: all var(--transition-fast); border: none; }
        .quick-action:hover { background: var(--primary-100); color: var(--primary-700); }
        
        /* Agent Capabilities */
        .capability-card { text-align: center; padding: var(--space-4); }
        .capability-icon { font-size: var(--text-3xl); margin-bottom: var(--space-3); }
        .capability-title { font-weight: 600; margin-bottom: var(--space-2); }
        .capability-desc { color: var(--gray-600); font-size: var(--text-sm); }
        
        @media (max-width: 768px) { .grid-cols-2, .grid-cols-3 { grid-template-columns: 1fr; } .nav-links { display: none; } .interactive-controls { flex-direction: column; } .message { max-width: 90%; } }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="logo"><i class="fas fa-rocket"></i> SkillSync AI</a>
            <ul class="nav-links">
                <li><a href="/dashboard"><i class="fas fa-chart-line"></i> Dashboard</a></li>
                <li><a href="/market-intelligence"><i class="fas fa-brain"></i> Intelligence</a></li>
                <li><a href="/career-paths"><i class="fas fa-route"></i> Paths</a></li>
                <li><a href="/tools"><i class="fas fa-tools"></i> Tools</a></li>
                <li><a href="/ai-agent"><i class="fas fa-robot"></i> AI Agent</a></li>
                <li><a href="/community"><i class="fas fa-users"></i> Community</a></li>
            </ul>
        </div>
    </nav>

    <section class="hero">
        <div class="container">
            <h1><i class="fas fa-robot"></i> AI Career Agent</h1>
            <p style="font-size: var(--text-lg); opacity: 0.8; margin-bottom: var(--space-8); color: var(--gray-700);">
                <span style="color: var(--gray-700);">Your intelligent career companion providing 24/7 personalized guidance and insights</span>
            </p>
            <div class="interactive-controls">
                <button class="btn btn-primary" onclick="startChat()">
                    <i class="fas fa-comments"></i> Start Conversation
                </button>
                <button class="btn btn-secondary" onclick="showCapabilities()">
                    <i class="fas fa-list"></i> View Capabilities
                </button>
                <button class="btn btn-secondary" onclick="getProactiveInsights()">
                    <i class="fas fa-lightbulb"></i> Get Insights
                </button>
            </div>
        </div>
    </section>

    <main style="padding: var(--space-8) 0;">
        <div class="container">
            <!-- AI Agent Status -->
            <div class="data-section">
                <div class="card" style="text-align: center; margin-bottom: var(--space-8);">
                    <div style="display: flex; justify-content: center; align-items: center; gap: var(--space-4); margin-bottom: var(--space-4);">
                        <div style="font-size: var(--text-3xl);">🤖</div>
                        <div>
                            <h3>SkillSync AI Agent</h3>
                            <div class="status-indicator">
                                <div class="status-dot status-online" id="agentStatus"></div>
                                <span id="agentStatusText">Online & Ready</span>
                            </div>
                        </div>
                    </div>
                    <p style="color: var(--gray-600); margin-bottom: var(--space-4);">
                        Powered by advanced AI to provide personalized career guidance, skill recommendations, and market insights.
                    </p>
                    <div style="display: flex; gap: var(--space-4); justify-content: center; font-size: var(--text-sm); color: var(--gray-600);">
                        <span><i class="fas fa-brain"></i> AI-Powered</span>
                        <span><i class="fas fa-clock"></i> 24/7 Available</span>
                        <span><i class="fas fa-shield-alt"></i> Privacy Protected</span>
                        <span><i class="fas fa-sync"></i> Always Learning</span>
                    </div>
                </div>
            </div>

            <!-- Interactive Chat Interface -->
            <div class="data-section">
                <h2 class="section-title">Interactive AI Chat</h2>
                <div class="grid grid-cols-2">
                    <div class="card" style="padding: 0;">
                        <div class="chat-container">
                            <div class="chat-header">
                                <div style="display: flex; justify-content: between; align-items: center;">
                                    <span>Career AI Assistant</span>
                                    <div class="status-indicator" style="margin-left: auto;">
                                        <div class="status-dot status-online"></div>
                                        <span>Online</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="chat-messages" id="chatMessages">
                                <div class="message ai">
                                    👋 Hello! I'm your AI career assistant. I can help you with career planning, skill development, job search strategies, and market insights. What would you like to discuss today?
                                </div>
                            </div>
                            
                            <div style="padding: var(--space-4);">
                                <div class="quick-actions">
                                    <button class="quick-action" onclick="sendQuickMessage('career advice')">Career Advice</button>
                                    <button class="quick-action" onclick="sendQuickMessage('skill assessment')">Skill Assessment</button>
                                    <button class="quick-action" onclick="sendQuickMessage('job search help')">Job Search</button>
                                    <button class="quick-action" onclick="sendQuickMessage('salary negotiation')">Salary Tips</button>
                                </div>
                            </div>
                            
                            <div class="chat-input-container">
                                <input type="text" id="chatInput" class="chat-input" placeholder="Ask me anything about your career..." onkeypress="handleKeyPress(event)">
                                <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <div class="card" style="margin-bottom: var(--space-6);">
                            <h3 style="margin-bottom: var(--space-4);"><i class="fas fa-magic"></i> AI Capabilities</h3>
                            <div class="grid grid-cols-2" style="gap: var(--space-4);">
                                <div class="capability-card">
                                    <div class="capability-icon" style="color: var(--info);">
                                        <i class="fas fa-route"></i>
                                    </div>
                                    <div class="capability-title">Career Planning</div>
                                    <div class="capability-desc">Personalized roadmaps and goal setting</div>
                                </div>
                                <div class="capability-card">
                                    <div class="capability-icon" style="color: var(--success);">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <div class="capability-title">Market Analysis</div>
                                    <div class="capability-desc">Real-time industry insights</div>
                                </div>
                                <div class="capability-card">
                                    <div class="capability-icon" style="color: var(--warning);">
                                        <i class="fas fa-graduation-cap"></i>
                                    </div>
                                    <div class="capability-title">Skill Development</div>
                                    <div class="capability-desc">Learning recommendations</div>
                                </div>
                                <div class="capability-card">
                                    <div class="capability-icon" style="color: var(--error);">
                                        <i class="fas fa-bullseye"></i>
                                    </div>
                                    <div class="capability-title">Goal Tracking</div>
                                    <div class="capability-desc">Progress monitoring</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <h3 style="margin-bottom: var(--space-4);"><i class="fas fa-history"></i> Recent Interactions</h3>
                            <div id="recentInteractions">
                                <div style="padding: var(--space-3); border-bottom: 1px solid var(--gray-200); margin-bottom: var(--space-3);">
                                    <div style="font-weight: 600; margin-bottom: var(--space-1);">Career Path Guidance</div>
                                    <div style="font-size: var(--text-sm); color: var(--gray-600);">Discussed frontend to full-stack transition</div>
                                    <div style="font-size: var(--text-sm); color: var(--gray-500);">2 hours ago</div>
                                </div>
                                <div style="padding: var(--space-3); border-bottom: 1px solid var(--gray-200); margin-bottom: var(--space-3);">
                                    <div style="font-weight: 600; margin-bottom: var(--space-1);">Skill Assessment</div>
                                    <div style="font-size: var(--text-sm); color: var(--gray-600);">Evaluated React and JavaScript skills</div>
                                    <div style="font-size: var(--text-sm); color: var(--gray-500);">Yesterday</div>
                                </div>
                                <div style="padding: var(--space-3);">
                                    <div style="font-weight: 600; margin-bottom: var(--space-1);">Market Analysis</div>
                                    <div style="font-size: var(--text-sm); color: var(--gray-600);">Analyzed demand for cloud skills</div>
                                    <div style="font-size: var(--text-sm); color: var(--gray-500);">3 days ago</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Proactive Insights -->
            <div class="data-section">
                <h2 class="section-title">Proactive AI Insights</h2>
                <div class="grid grid-cols-3">
                    <div class="card" style="background: linear-gradient(135deg, var(--info) 0%, #3182ce 100%); color: white;">
                        <h3 style="margin-bottom: var(--space-4);"><i class="fas fa-trending-up"></i> Market Opportunity</h3>
                        <p style="margin-bottom: var(--space-4); opacity: 0.9; color: var(--gray-800);">
                            🚀 AI/ML skills are seeing 35% growth. Consider adding machine learning to your skillset.
                        </p>
                        <button class="btn" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);" onclick="exploreOpportunity('ai-ml')">
                            <i class="fas fa-arrow-right"></i> Explore
                        </button>
                    </div>
                    
                    <div class="card" style="background: linear-gradient(135deg, var(--success) 0%, #38a169 100%); color: white;">
                        <h3 style="margin-bottom: var(--space-4);"><i class="fas fa-certificate"></i> Skill Recommendation</h3>
                        <p style="margin-bottom: var(--space-4); opacity: 0.9; color: var(--gray-800);">
                            🎯 Based on your progress, AWS certification could boost your salary by 18%.
                        </p>
                        <button class="btn" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);" onclick="exploreOpportunity('aws-cert')">
                            <i class="fas fa-arrow-right"></i> Learn More
                        </button>
                    </div>
                    
                    <div class="card" style="background: linear-gradient(135deg, var(--warning) 0%, #d69e2e 100%); color: white;">
                        <h3 style="margin-bottom: var(--space-4);"><i class="fas fa-briefcase"></i> Job Alert</h3>
                        <p style="margin-bottom: var(--space-4); opacity: 0.9; color: var(--gray-800);">
                            💼 12 new jobs matching your profile posted this week. Check them out!
                        </p>
                        <button class="btn" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);" onclick="exploreOpportunity('job-matches')">
                            <i class="fas fa-arrow-right"></i> View Jobs
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        let isTyping = false;
        
        // AI Response Templates
        const aiResponses = {
            'career advice': "🎯 I'd be happy to help with career advice! Based on your profile, here are some key recommendations:\n\n• Focus on building your React skills - you're 75% there!\n• Consider learning Node.js for full-stack opportunities\n• Cloud skills (AWS/Azure) are in high demand\n• Build a portfolio showcasing real projects\n\nWhat specific aspect would you like to explore further?",
            
            'skill assessment': "📊 Let me analyze your current skill set:\n\n✅ **Strengths:**\n• JavaScript: 85% proficiency\n• HTML/CSS: 90% proficiency\n• React: 75% proficiency\n\n🎯 **Growth Areas:**\n• Backend development (Node.js)\n• Database management\n• Cloud deployment\n\nWould you like a detailed assessment or specific learning recommendations?",
            
            'job search help': "🔍 Here's a strategic approach to your job search:\n\n1. **Optimize your resume** for ATS systems\n2. **Target companies** that value your skillset\n3. **Network actively** on LinkedIn and tech communities\n4. **Practice coding challenges** and system design\n5. **Prepare for behavioral interviews**\n\nBased on your skills, I recommend focusing on startups and mid-size companies that need React developers. Want specific company suggestions?",
            
            'salary negotiation': "💰 Here are proven salary negotiation strategies:\n\n1. **Research market rates** - Your skills are worth $75k-120k\n2. **Document achievements** with specific metrics\n3. **Practice your pitch** - emphasize value delivered\n4. **Consider total compensation** (benefits, equity, growth)\n5. **Time it right** - after positive feedback or achievements\n\nGiven your React skills and market demand, you have good negotiating power. Want help crafting your pitch?"
        };
        
        function startChat() {
            const button = event.target;
            const originalText = button.innerHTML;
            
            // Show loading animation
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Connecting...';
            button.disabled = true;
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.disabled = false;
                
                // Focus chat input and add welcome message
                document.getElementById('chatInput').focus();
                addMessage('ai', '🚀 Great! I\\'m now fully activated and ready to help with your career. Try asking me about:\\n\\n• Career advice and planning\\n• Skill development recommendations\\n• Job search strategies\\n• Salary negotiation tips\\n\\nWhat would you like to discuss first?');
                
                showNotification('✅ AI Agent fully activated! Start typing your questions.', 'success');
            }, 1500);
        }
        
        function showCapabilities() {
            const modal = createModal('🤖 AI Agent Capabilities', `
                <div style="padding: var(--space-4);">
                    <div style="background: linear-gradient(135deg, var(--primary-500), var(--info)); color: white; padding: var(--space-6); border-radius: var(--radius-xl); margin-bottom: var(--space-6); text-align: center;">
                        <i class="fas fa-robot" style="font-size: 3rem; margin-bottom: var(--space-4);"></i>
                        <h3 style="margin-bottom: var(--space-3);">SkillSync AI Agent Capabilities</h3>
                        <p style="opacity: 0.9;">Advanced AI-powered career assistance with A2A protocol integration</p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4); margin-bottom: var(--space-6);">
                        <div style="background: var(--primary-50); padding: var(--space-4); border-radius: var(--radius-lg);">
                            <h4 style="color: var(--primary-700); margin-bottom: var(--space-3); display: flex; align-items: center; gap: var(--space-2);">
                                <i class="fas fa-route"></i> Career Planning
                            </h4>
                            <ul style="color: var(--gray-700); font-size: var(--text-sm); line-height: 1.6;">
                                <li>• Personalized career roadmaps</li>
                                <li>• SMART goal setting and tracking</li>
                                <li>• Timeline optimization</li>
                                <li>• Milestone recommendations</li>
                            </ul>
                            <button class="btn btn-primary" onclick="startCareerPlanning()" style="width: 100%; margin-top: var(--space-3); font-size: var(--text-sm);">
                                Start Planning
                            </button>
                        </div>
                        
                        <div style="background: var(--success-50); padding: var(--space-4); border-radius: var(--radius-lg);">
                            <h4 style="color: var(--success-700); margin-bottom: var(--space-3); display: flex; align-items: center; gap: var(--space-2);">
                                <i class="fas fa-chart-line"></i> Market Analysis
                            </h4>
                            <ul style="color: var(--gray-700); font-size: var(--text-sm); line-height: 1.6;">
                                <li>• Real-time industry insights</li>
                                <li>• Salary trend analysis</li>
                                <li>• Skill demand forecasting</li>
                                <li>• Job market opportunities</li>
                            </ul>
                            <button class="btn btn-primary" onclick="openMarketAnalysis()" style="width: 100%; margin-top: var(--space-3); font-size: var(--text-sm);">
                                Analyze Market
                            </button>
                        </div>
                        
                        <div style="background: var(--info-50); padding: var(--space-4); border-radius: var(--radius-lg);">
                            <h4 style="color: var(--info-700); margin-bottom: var(--space-3); display: flex; align-items: center; gap: var(--space-2);">
                                <i class="fas fa-graduation-cap"></i> Skill Development
                            </h4>
                            <ul style="color: var(--gray-700); font-size: var(--text-sm); line-height: 1.6;">
                                <li>• Personalized learning paths</li>
                                <li>• Skill gap analysis</li>
                                <li>• Progress tracking</li>
                                <li>• Resource recommendations</li>
                            </ul>
                            <button class="btn btn-primary" onclick="startSkillDevelopment()" style="width: 100%; margin-top: var(--space-3); font-size: var(--text-sm);">
                                Develop Skills
                            </button>
                        </div>
                        
                        <div style="background: var(--warning-50); padding: var(--space-4); border-radius: var(--radius-lg);">
                            <h4 style="color: var(--warning-700); margin-bottom: var(--space-3); display: flex; align-items: center; gap: var(--space-2);">
                                <i class="fas fa-briefcase"></i> Job Search & Networking
                            </h4>
                            <ul style="color: var(--gray-700); font-size: var(--text-sm); line-height: 1.6;">
                                <li>• Resume optimization</li>
                                <li>• Interview preparation</li>
                                <li>• Networking strategies</li>
                                <li>• Application tracking</li>
                            </ul>
                            <button class="btn btn-primary" onclick="startJobSearch()" style="width: 100%; margin-top: var(--space-3); font-size: var(--text-sm);">
                                Find Jobs
                            </button>
                        </div>
                    </div>
                    
                    <div style="background: var(--gray-50); padding: var(--space-4); border-radius: var(--radius-lg); margin-bottom: var(--space-4);">
                        <h4 style="color: var(--gray-800); margin-bottom: var(--space-3);"><i class="fas fa-network-wired"></i> A2A Protocol Integration</h4>
                        <p style="color: var(--gray-700); font-size: var(--text-sm); line-height: 1.6;">
                            Our AI agents communicate using advanced Agent-to-Agent protocols, enabling seamless collaboration between specialist AIs for comprehensive career guidance.
                        </p>
                    </div>
                    
                    <div style="text-align: center;">
                        <button class="btn btn-secondary" onclick="closeModal()">Got it!</button>
                    </div>
                </div>
            `);
        }
        
        async function getProactiveInsights() {
            setAgentStatus('thinking', 'Analyzing your profile...');
            
            const modal = createModal('🔍 AI Proactive Insights', `
                <div style="padding: var(--space-4); text-align: center;">
                    <div style="background: linear-gradient(135deg, var(--success), var(--info)); color: white; padding: var(--space-6); border-radius: var(--radius-xl); margin-bottom: var(--space-6);">
                        <i class="fas fa-brain" style="font-size: 3rem; margin-bottom: var(--space-4);"></i>
                        <h3 style="margin-bottom: var(--space-3);">AI Analysis in Progress</h3>
                        <p style="opacity: 0.9;">Analyzing market trends, your profile, and generating insights...</p>
                        <div style="margin-top: var(--space-4);">
                            <div style="background: rgba(255,255,255,0.3); height: 6px; border-radius: 3px; overflow: hidden;">
                                <div class="insight-progress" style="background: white; height: 100%; width: 0%; transition: width 3s ease;"></div>
                            </div>
                        </div>
                    </div>
                    <div id="insightSteps" style="text-align: left;">
                        <div class="insight-step" style="margin-bottom: var(--space-2); opacity: 0.5;">📊 Analyzing current market trends...</div>
                        <div class="insight-step" style="margin-bottom: var(--space-2); opacity: 0.5;">👤 Reviewing your skill profile...</div>
                        <div class="insight-step" style="margin-bottom: var(--space-2); opacity: 0.5;">🎯 Identifying growth opportunities...</div>
                        <div class="insight-step" style="margin-bottom: var(--space-2); opacity: 0.5;">💡 Generating personalized recommendations...</div>
                    </div>
                </div>
            `);
            
            // Animate insights generation
            setTimeout(() => {
                document.querySelector('.insight-progress').style.width = '100%';
                const steps = document.querySelectorAll('.insight-step');
                steps.forEach((step, index) => {
                    setTimeout(() => {
                        step.style.opacity = '1';
                        step.style.transform = 'scale(1.05)';
                        setTimeout(() => step.style.transform = 'scale(1)', 200);
                    }, index * 600);
                });
            }, 100);
            
            try {
                // Call real AI insights API
                const response = await fetch('/api/ai/proactive-insights', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        context: 'proactive_career_insights',
                        user_data: {
                            skills: ['React', 'JavaScript', 'HTML/CSS'],
                            experience_level: 'intermediate',
                            career_goal: 'Full Stack Developer'
                        }
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    setTimeout(() => {
                        closeModal();
                        showInsightsResults(data);
                        setAgentStatus('online', 'Online & Ready');
                    }, 3000);
                    return;
                }
            } catch (error) {
                console.log('Using fallback insights generation:', error);
            }
            
            // Fallback insights
            setTimeout(() => {
                closeModal();
                showInsightsResults({
                    immediate_opportunities: [
                        '3 companies actively hiring React developers in your area',
                        'Remote positions increased 40% this month',
                        'Junior to Mid-level transition window is optimal now'
                    ],
                    market_trends: [
                        'TypeScript demand up 25% - perfect addition to your React skills',
                        'Cloud deployment skills could increase salary by $15k',
                        'AI integration skills becoming essential for developers'
                    ],
                    personalized_recommendations: [
                        'Complete React learning path (25% remaining)',
                        'Start Node.js basics next month for full-stack readiness',
                        'Consider AWS certification for Q3 - high ROI skill',
                        'Build 2-3 portfolio projects to demonstrate capabilities'
                    ]
                });
                setAgentStatus('online', 'Online & Ready');
            }, 3200);
        }
        
        function sendQuickMessage(topic) {
            addMessage('user', `Tell me about ${topic}`);
            handleAIResponse(topic);
        }
        
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addMessage('user', message);
            input.value = '';
            
            // Simple keyword matching for demo
            const lowerMessage = message.toLowerCase();
            let responseKey = 'default';
            
            if (lowerMessage.includes('career') || lowerMessage.includes('advice')) {
                responseKey = 'career advice';
            } else if (lowerMessage.includes('skill') || lowerMessage.includes('assessment')) {
                responseKey = 'skill assessment';
            } else if (lowerMessage.includes('job') || lowerMessage.includes('search')) {
                responseKey = 'job search help';
            } else if (lowerMessage.includes('salary') || lowerMessage.includes('money')) {
                responseKey = 'salary negotiation';
            }
            
            handleAIResponse(responseKey, message);
        }
        
        async function handleAIResponse(responseKey, originalMessage = '') {
            setAgentStatus('thinking', 'Thinking...');
            addTypingIndicator();
            
            try {
                // Try to get real AI response from backend
                const response = await fetch('/api/ai/career-guidance', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        career_goals: originalMessage || responseKey,
                        current_role: 'User', 
                        experience_level: 'Mid-Level',
                        additional_context: 'AI Agent Chat'
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    removeTypingIndicator();
                    
                    // Handle new enhanced API response format
                    if (data.success && data.guidance) {
                        addMessage('ai', data.guidance);
                        
                        // Show enhanced features if available
                        if (data.specialist_agents_involved && data.specialist_agents_involved.length > 1) {
                            const agentInfo = `✨ Analysis by: ${data.specialist_agents_involved.join(', ')}`;
                            addMessage('ai', agentInfo, 'system');
                        }
                    } else {
                        // Fallback for older format
                        addMessage('ai', data.ai_response || data.guidance || data.message || 'Analysis completed successfully!');
                    }
                    
                    setAgentStatus('online', 'Online & Ready');
                    return;
                }
            } catch (error) {
                console.log('Using fallback response due to:', error);
            }
            
            // Fallback to local responses if API fails
            setTimeout(() => {
                removeTypingIndicator();
                
                let response = aiResponses[responseKey];
                
                if (!response) {
                    response = `🤔 I understand you're asking about "${originalMessage}". While I don't have a specific response for that, I can help you with:\n\n• Career planning and goal setting\n• Skill development recommendations\n• Job search strategies\n• Market insights and trends\n• Salary guidance\n\nWhat specific area interests you most?`;
                }
                
                addMessage('ai', response);
                setAgentStatus('online', 'Online & Ready');
            }, 1500 + Math.random() * 1000);
        }
        
        function addMessage(sender, text) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            // Format text with line breaks and basic formatting
            const formattedText = text
                .replace(/\n/g, '<br>')
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/•/g, '&bull;');
            
            messageDiv.innerHTML = formattedText;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function addTypingIndicator() {
            const messagesContainer = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai typing-indicator';
            typingDiv.innerHTML = '<span class="typing"></span><span class="typing"></span><span class="typing"></span>';
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            isTyping = true;
        }
        
        function removeTypingIndicator() {
            const typingIndicator = document.querySelector('.typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
            isTyping = false;
        }
        
        function setAgentStatus(status, text) {
            const statusDot = document.getElementById('agentStatus');
            const statusText = document.getElementById('agentStatusText');
            
            statusDot.className = `status-dot status-${status}`;
            statusText.textContent = text;
        }
        
        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }
        
        function exploreOpportunity(type) {
            const opportunities = {
                'ai-ml': {
                    title: 'AI/ML Career Opportunity',
                    icon: '🤖',
                    growth: '35% increase',
                    salary: '$110k-160k',
                    details: 'The AI/ML field is experiencing unprecedented growth with high-paying remote opportunities.',
                    learningPath: [
                        'Python fundamentals mastery',
                        'Data analysis with pandas/numpy',
                        'Machine learning with scikit-learn',
                        'Deep learning basics with TensorFlow',
                        'MLOps and deployment strategies'
                    ],
                    timeline: '8-12 months',
                    action: () => window.location.href = '/career-paths?focus=ai-ml'
                },
                'aws-cert': {
                    title: 'AWS Certification Path',
                    icon: '☁️',
                    growth: '18% salary increase',
                    salary: 'Up to +$25k',
                    details: 'AWS skills are highly valued with 67% of companies using AWS infrastructure.',
                    learningPath: [
                        'AWS Cloud Practitioner (foundational)',
                        'AWS Solutions Architect Associate',
                        'Specialized certifications by interest',
                        'Hands-on labs and practice exams',
                        'Real-world project implementation'
                    ],
                    timeline: '4-6 months',
                    action: () => window.location.href = '/tools?focus=aws-cert'
                },
                'job-matches': {
                    title: 'Personalized Job Matches',
                    icon: '💼',
                    growth: '12 new matches',
                    salary: '$85k-120k average',
                    details: 'AI-curated job opportunities matching your skills and preferences.',
                    learningPath: [
                        'Frontend Developer - TechStart Inc. (92% match)',
                        'Full Stack Developer - InnovateCorp (87% match)',
                        'UI Developer - DesignFirst (89% match)',
                        'React Developer - StartupHub (91% match)',
                        'Software Engineer - TechCorp (85% match)'
                    ],
                    timeline: 'Apply now',
                    action: () => window.location.href = '/community?tab=jobs'
                }
            };
            
            const opportunity = opportunities[type];
            if (!opportunity) return;
            
            const modal = createModal(`${opportunity.icon} ${opportunity.title}`, `
                <div style="padding: var(--space-4);">
                    <div style="background: linear-gradient(135deg, var(--success), var(--info)); color: white; padding: var(--space-6); border-radius: var(--radius-xl); margin-bottom: var(--space-6); text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: var(--space-3);">${opportunity.icon}</div>
                        <h3 style="margin-bottom: var(--space-3);">${opportunity.title}</h3>
                        <div style="display: flex; justify-content: center; gap: var(--space-6); margin-bottom: var(--space-4);">
                            <div>
                                <div style="font-size: var(--text-xl); font-weight: 700;">${opportunity.growth}</div>
                                <div style="opacity: 0.9;">Market Growth</div>
                            </div>
                            <div>
                                <div style="font-size: var(--text-xl); font-weight: 700;">${opportunity.salary}</div>
                                <div style="opacity: 0.9;">Salary Range</div>
                            </div>
                            <div>
                                <div style="font-size: var(--text-xl); font-weight: 700;">${opportunity.timeline}</div>
                                <div style="opacity: 0.9;">Timeline</div>
                            </div>
                        </div>
                        <p style="opacity: 0.9;">${opportunity.details}</p>
                    </div>
                    
                    <div style="margin-bottom: var(--space-6);">
                        <h4 style="margin-bottom: var(--space-4);">📚 Recommended Learning Path</h4>
                        <div style="display: grid; gap: var(--space-2);">
                            ${opportunity.learningPath.map((step, index) => `
                                <div style="display: flex; align-items: center; padding: var(--space-3); background: var(--gray-50); border-radius: var(--radius-lg);">
                                    <div style="width: 24px; height: 24px; background: var(--primary-500); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: var(--space-3); font-size: var(--text-sm); font-weight: 600;">${index + 1}</div>
                                    <div>${step}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: var(--space-3); justify-content: center;">
                        <button class="btn btn-secondary" onclick="closeModal()">Learn More Later</button>
                        <button class="btn btn-primary" onclick="executeOpportunityAction('${type}')">
                            <i class="fas fa-rocket"></i> Get Started
                        </button>
                    </div>
                </div>
            `);
        }
        
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 9999;
                padding: 12px 24px; border-radius: 8px; color: white;
                background: ${type === 'success' ? '#48bb78' : type === 'error' ? '#f56565' : '#4299e1'};
                box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: all 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }
        
        // Supporting functions for new functionality
        function startCareerPlanning() {
            closeModal();
            showNotification('🚀 Redirecting to Career Planning...', 'info');
            setTimeout(() => {
                window.location.href = '/career-paths';
            }, 1000);
        }
        
        function openMarketAnalysis() {
            closeModal();
            showNotification('📊 Opening Market Intelligence...', 'info');
            setTimeout(() => {
                window.location.href = '/market-intelligence';
            }, 1000);
        }
        
        function startSkillDevelopment() {
            closeModal();
            showNotification('🎓 Opening AI Tools for Skill Development...', 'info');
            setTimeout(() => {
                window.location.href = '/tools';
            }, 1000);
        }
        
        function startJobSearch() {
            closeModal();
            showNotification('💼 Opening Community Job Board...', 'info');
            setTimeout(() => {
                window.location.href = '/community?tab=jobs';
            }, 1000);
        }
        
        function showInsightsResults(insights) {
            const modal = createModal('💡 Your Proactive Career Insights', `
                <div style="padding: var(--space-4);">
                    <div style="background: linear-gradient(135deg, var(--warning), var(--success)); color: white; padding: var(--space-6); border-radius: var(--radius-xl); margin-bottom: var(--space-6); text-align: center;">
                        <i class="fas fa-lightbulb" style="font-size: 3rem; margin-bottom: var(--space-4);"></i>
                        <h3 style="margin-bottom: var(--space-3);">AI Analysis Complete</h3>
                        <p style="opacity: 0.9;">Personalized insights based on your profile and market data</p>
                    </div>
                    
                    <div style="margin-bottom: var(--space-6);">
                        <h4 style="color: var(--success); margin-bottom: var(--space-3);"><i class="fas fa-rocket"></i> Immediate Opportunities</h4>
                        <div style="background: var(--success-50); padding: var(--space-4); border-radius: var(--radius-lg);">
                            ${insights.immediate_opportunities.map(opp => `<p style="margin-bottom: var(--space-2); color: var(--gray-700);">• ${opp}</p>`).join('')}
                        </div>
                    </div>
                    
                    <div style="margin-bottom: var(--space-6);">
                        <h4 style="color: var(--info); margin-bottom: var(--space-3);"><i class="fas fa-chart-line"></i> Market Trends</h4>
                        <div style="background: var(--info-50); padding: var(--space-4); border-radius: var(--radius-lg);">
                            ${insights.market_trends.map(trend => `<p style="margin-bottom: var(--space-2); color: var(--gray-700);">• ${trend}</p>`).join('')}
                        </div>
                    </div>
                    
                    <div style="margin-bottom: var(--space-6);">
                        <h4 style="color: var(--primary-600); margin-bottom: var(--space-3);"><i class="fas fa-bullseye"></i> Personalized Recommendations</h4>
                        <div style="background: var(--primary-50); padding: var(--space-4); border-radius: var(--radius-lg);">
                            ${insights.personalized_recommendations.map(rec => `<p style="margin-bottom: var(--space-2); color: var(--gray-700);">• ${rec}</p>`).join('')}
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: var(--space-3); justify-content: center;">
                        <button class="btn btn-secondary" onclick="saveInsights()">💾 Save Insights</button>
                        <button class="btn btn-primary" onclick="createActionPlan()">
                            <i class="fas fa-clipboard-list"></i> Create Action Plan
                        </button>
                    </div>
                </div>
            `);
        }
        
        function executeOpportunityAction(type) {
            const opportunities = {
                'ai-ml': () => window.location.href = '/career-paths?focus=ai-ml',
                'aws-cert': () => window.location.href = '/tools?focus=aws-cert',
                'job-matches': () => window.location.href = '/community?tab=jobs'
            };
            
            closeModal();
            showNotification('🚀 Taking you to the relevant section...', 'info');
            setTimeout(() => {
                if (opportunities[type]) {
                    opportunities[type]();
                }
            }, 1000);
        }
        
        function saveInsights() {
            // Save insights to localStorage or user profile
            localStorage.setItem('skillsync_latest_insights', JSON.stringify({
                timestamp: new Date().toISOString(),
                insights: 'Saved for user reference'
            }));
            
            showNotification('💾 Insights saved to your profile!', 'success');
            closeModal();
        }
        
        function createActionPlan() {
            closeModal();
            showNotification('📋 Creating personalized action plan...', 'info');
            setTimeout(() => {
                window.location.href = '/goals';
            }, 1000);
        }
        
        // Utility functions
        function createModal(title, content) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0,0,0,0.5); display: flex; align-items: center;
                justify-content: center; z-index: 9999; backdrop-filter: blur(4px);
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: var(--radius-xl); padding: 0; 
                           max-width: 900px; width: 90%; max-height: 80vh; overflow-y: auto; 
                           box-shadow: var(--shadow-2xl);">
                    <div style="display: flex; justify-content: space-between; align-items: center; 
                               padding: var(--space-4) var(--space-6); border-bottom: 1px solid var(--gray-200);">
                        <h2 style="font-size: var(--text-xl); font-weight: 700; color: var(--gray-800);">${title}</h2>
                        <button onclick="closeModal()" style="background: none; border: none; 
                                font-size: var(--text-xl); color: var(--gray-500); cursor: pointer; 
                                width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; 
                                border-radius: 50%; transition: all 0.2s;" 
                                onmouseover="this.style.background='var(--gray-100)'" 
                                onmouseout="this.style.background='none'">&times;</button>
                    </div>
                    <div>${content}</div>
                </div>
            `;
            
            document.body.appendChild(modal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });
            
            return modal;
        }
        
        function closeModal() {
            const modal = document.querySelector('div[style*="position: fixed"][style*="z-index: 9999"]');
            if (modal) modal.remove();
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            showNotification('AI Career Agent is online and ready to help!', 'success');
            
            // Simulate proactive insight after a delay
            setTimeout(() => {
                if (document.getElementById('chatMessages').children.length === 1) {
                    addMessage('ai', "💡 **Proactive Tip:** I noticed you're focusing on React development. The market is showing strong demand for React developers with TypeScript experience. Would you like me to suggest a learning path for TypeScript?");
                }
            }, 5000);
        });
    </script>
</body>
</html>